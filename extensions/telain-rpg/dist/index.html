<script>/* <body> Tavern Helper Frontend */</script><div id="app" style="min-height: 100vh"></div><style>html, body {
    margin: 0;
    padding: 0;
  }</style><script type="module">var e={8(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.top-info-bar[data-v-8835cc04]{position:relative;padding:var(--spacing-sm) var(--spacing-md);background:linear-gradient(180deg, var(--color-bg-primary) 0%, var(--color-bg-secondary) 100%);border-bottom:1px solid var(--color-border)}.info-bar-content[data-v-8835cc04]{display:flex;align-items:center;gap:var(--spacing-md)}.info-item[data-v-8835cc04]{display:flex;align-items:center;gap:var(--spacing-xs)}.info-item .info-icon[data-v-8835cc04]{font-size:16px}.info-item .info-text[data-v-8835cc04]{font-size:var(--font-size-sm);color:var(--color-text-secondary)}.info-item .info-value[data-v-8835cc04]{font-size:var(--font-size-sm);color:var(--color-text-primary);font-weight:bold}.info-item.location .info-text[data-v-8835cc04]{color:var(--color-accent)}.info-item.chapter .info-text[data-v-8835cc04]{color:var(--color-text-muted);font-style:italic}.info-spacer[data-v-8835cc04]{flex:1}.bar-decoration[data-v-8835cc04]{position:absolute;bottom:-5px;left:0;right:0;height:10px;color:var(--color-border-gold);opacity:.5}.bar-decoration svg[data-v-8835cc04]{width:100%;height:100%}','']);const l=i},16(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.battle-log[data-v-554b1c6d]{height:100%;display:flex;flex-direction:column;background:var(--color-bg-primary);border:1px solid var(--color-border);border-radius:var(--radius-sm);overflow:hidden}.log-header[data-v-554b1c6d]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-xs) var(--spacing-sm);background:var(--color-bg-secondary);border-bottom:1px solid var(--color-border)}.log-header .log-title[data-v-554b1c6d]{font-size:var(--font-size-xs);color:var(--color-text-secondary);white-space:nowrap}.log-header .ornament-divider[data-v-554b1c6d]{flex:1}.log-content[data-v-554b1c6d]{flex:1;overflow-y:auto;padding:var(--spacing-sm);font-family:var(--font-ui);font-size:var(--font-size-sm)}.log-content[data-v-554b1c6d]::-webkit-scrollbar{width:6px}.log-content[data-v-554b1c6d]::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.log-content[data-v-554b1c6d]::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:3px}.log-entry[data-v-554b1c6d]{display:flex;gap:var(--spacing-xs);margin-bottom:var(--spacing-xs);line-height:1.4}.log-entry .log-prefix[data-v-554b1c6d]{color:var(--color-accent);flex-shrink:0}.log-entry .log-message[data-v-554b1c6d]{color:var(--color-text-primary)}.log-entry.system .log-message[data-v-554b1c6d]{color:var(--color-info);font-style:italic}.log-entry.combat .log-message[data-v-554b1c6d]{color:var(--color-text-primary)}.log-entry.damage .log-message[data-v-554b1c6d]{color:var(--color-danger)}.log-entry.heal .log-message[data-v-554b1c6d]{color:var(--color-success)}.log-entry.dialogue .log-message[data-v-554b1c6d]{color:var(--color-accent-light)}.log-item-enter-active[data-v-554b1c6d]{transition:all .3s ease}.log-item-enter-from[data-v-554b1c6d]{opacity:0;transform:translateY(-10px)}.log-item-move[data-v-554b1c6d]{transition:transform .3s ease}','']);const l=i},35(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.placeholder-view[data-v-72830162]{height:100%;padding:var(--spacing-md);display:flex;align-items:center;justify-content:center}.placeholder-view .placeholder-panel[data-v-72830162]{width:100%;max-width:400px}.placeholder-view .placeholder-content[data-v-72830162]{padding:var(--spacing-xl);text-align:center}.placeholder-view .placeholder-content .placeholder-icon[data-v-72830162]{font-size:64px;display:block;margin-bottom:var(--spacing-md)}.placeholder-view .placeholder-content h2[data-v-72830162]{color:var(--color-accent);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content p[data-v-72830162]{color:var(--color-text-secondary);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content .coming-soon[data-v-72830162]{color:var(--color-text-muted);font-style:italic;margin-top:var(--spacing-lg)}','']);const l=i},56(e,a,t){e.exports=function(e){var a=t.nc;a&&e.setAttribute('nonce',a)}},72(e){var a=[];function t(e){for(var t=-1,o=0;o<a.length;o++)if(a[o].identifier===e){t=o;break}return t}function o(e,o){for(var n={},i=[],l=0;l<e.length;l++){var c=e[l],s=o.base?c[0]+o.base:c[0],d=n[s]||0,p=''.concat(s,' ').concat(d);n[s]=d+1;var m=t(p),v={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)a[m].references++,a[m].updater(v);else{var u=r(v,o);o.byIndex=l,a.splice(l,0,{identifier:p,updater:u,references:1})}i.push(p)}return i}function r(e,a){var t=a.domAPI(a);t.update(e);return function(a){if(a){if(a.css===e.css&&a.media===e.media&&a.sourceMap===e.sourceMap&&a.supports===e.supports&&a.layer===e.layer)return;t.update(e=a)}else t.remove()}}e.exports=function(e,r){var n=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<n.length;i++){var l=t(n[i]);a[l].references--}for(var c=o(e,r),s=0;s<n.length;s++){var d=t(n[s]);0===a[d].references&&(a[d].updater(),a.splice(d,1))}n=c}}},89(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.loading-magic-circle[data-v-1d6ad6a4]{position:relative;display:flex;align-items:center;justify-content:center}.loading-magic-circle.small[data-v-1d6ad6a4]{width:30px;height:30px}.loading-magic-circle.small .circle-outer[data-v-1d6ad6a4]{width:30px;height:30px}.loading-magic-circle.small .circle-inner[data-v-1d6ad6a4]{width:15px;height:15px}.loading-magic-circle.small .rune[data-v-1d6ad6a4]{font-size:8px}.loading-magic-circle.medium[data-v-1d6ad6a4]{width:50px;height:50px}.loading-magic-circle.medium .circle-outer[data-v-1d6ad6a4]{width:50px;height:50px}.loading-magic-circle.medium .circle-inner[data-v-1d6ad6a4]{width:25px;height:25px}.loading-magic-circle.medium .rune[data-v-1d6ad6a4]{font-size:10px}.loading-magic-circle.large[data-v-1d6ad6a4]{width:80px;height:80px}.loading-magic-circle.large .circle-outer[data-v-1d6ad6a4]{width:80px;height:80px}.loading-magic-circle.large .circle-inner[data-v-1d6ad6a4]{width:40px;height:40px}.loading-magic-circle.large .rune[data-v-1d6ad6a4]{font-size:14px}.circle-outer[data-v-1d6ad6a4]{position:absolute;border:2px solid var(--color-accent);border-radius:50%;animation:magic-spin-1d6ad6a4 3s linear infinite;opacity:.8}.circle-outer .rune[data-v-1d6ad6a4]{position:absolute;color:var(--color-accent)}.circle-outer .rune.rune-1[data-v-1d6ad6a4]{top:-8px;left:50%;transform:translateX(-50%)}.circle-outer .rune.rune-2[data-v-1d6ad6a4]{right:-8px;top:50%;transform:translateY(-50%)}.circle-outer .rune.rune-3[data-v-1d6ad6a4]{bottom:-8px;left:50%;transform:translateX(-50%)}.circle-outer .rune.rune-4[data-v-1d6ad6a4]{left:-8px;top:50%;transform:translateY(-50%)}.circle-inner[data-v-1d6ad6a4]{position:absolute;border:1px solid var(--color-accent-light);border-radius:50%;animation:magic-spin-1d6ad6a4 2s linear infinite reverse;opacity:.6}.core-glow[data-v-1d6ad6a4]{position:absolute;inset:30%;background:var(--color-accent);border-radius:50%;filter:blur(3px);animation:pulse-1d6ad6a4 1.5s ease-in-out infinite}@keyframes magic-spin-1d6ad6a4{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes pulse-1d6ad6a4{0%,100%{opacity:.5;transform:scale(0.8)}50%{opacity:1;transform:scale(1.2)}}','']);const l=i},113(e){e.exports=function(e,a){if(a.styleSheet)a.styleSheet.cssText=e;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(e))}}},114(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.placeholder-view[data-v-49b3376c]{height:100%;padding:var(--spacing-md);display:flex;align-items:center;justify-content:center}.placeholder-view .placeholder-panel[data-v-49b3376c]{width:100%;max-width:400px}.placeholder-view .placeholder-content[data-v-49b3376c]{padding:var(--spacing-xl);text-align:center}.placeholder-view .placeholder-content .placeholder-icon[data-v-49b3376c]{font-size:64px;display:block;margin-bottom:var(--spacing-md)}.placeholder-view .placeholder-content h2[data-v-49b3376c]{color:var(--color-accent);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content p[data-v-49b3376c]{color:var(--color-text-secondary);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content .coming-soon[data-v-49b3376c]{color:var(--color-text-muted);font-style:italic;margin-top:var(--spacing-lg)}','']);const l=i},249(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,':root{--color-primary: #2C1810;--color-primary-light: #4A3728;--color-primary-dark: #1A0E08;--color-accent: #D4AF37;--color-accent-light: #F4D03F;--color-accent-dark: #996515;--color-success: #4A7C59;--color-danger: #8B0000;--color-warning: #CC7722;--color-info: #4682B4;--color-success-rgb: 74, 124, 89;--color-danger-rgb: 139, 0, 0;--color-warning-rgb: 204, 119, 34;--color-info-rgb: 70, 130, 180;--color-text-primary: #E8DCC4;--color-text-secondary: #A89880;--color-text-muted: #6B5B4F;--color-bg-primary: #1A0E08;--color-bg-secondary: #2C1810;--color-bg-card: #3D2817;--color-bg-overlay: rgba(0, 0, 0, 0.7);--color-border: #5C4033;--color-border-gold: #D4AF37;--gradient-parchment: linear-gradient( 135deg, #3D2817 0%, #2C1810 50%, #1A0E08 100% );--gradient-gold: linear-gradient( 180deg, #F4D03F 0%, #D4AF37 50%, #996515 100% );--gradient-panel: linear-gradient( 180deg, rgba(61, 40, 23, 0.95) 0%, rgba(26, 14, 8, 0.98) 100% );--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--font-title: \'Cinzel Decorative\', \'ZCOOL XiaoWei\', \'Noto Serif SC\', serif;--font-body: \'Noto Serif SC\', \'Source Han Serif CN\', serif;--font-ui: \'Spectral\', \'Noto Sans SC\', sans-serif;--font-size-xs: 12px;--font-size-sm: 14px;--font-size-base: 16px;--font-size-lg: 18px;--font-size-xl: 24px;--font-size-2xl: 32px;--shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);--shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);--shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);--shadow-glow: 0 0 20px var(--color-accent);--transition-fast: 0.15s ease;--transition-normal: 0.3s ease;--transition-slow: 0.5s ease}*{margin:0;padding:0;box-sizing:border-box}.telain-container{width:100%;height:100vh;font-family:var(--font-body);font-size:var(--font-size-base);color:var(--color-text-primary);background:var(--color-bg-primary);overflow:hidden;position:relative}.app-background{position:absolute;inset:0;z-index:0;pointer-events:none}.app-background .bg-overlay{position:absolute;inset:0;background:var(--gradient-parchment);opacity:.95}.app-background .bg-particles{position:absolute;inset:0;background-image:radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),radial-gradient(circle at 80% 70%, rgba(212, 175, 55, 0.08) 0%, transparent 40%)}.app-content{position:relative;z-index:1;display:flex;flex-direction:column;height:100%}.main-content{flex:1;overflow:hidden;position:relative}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--color-bg-primary)}::-webkit-scrollbar-thumb{background:var(--color-border);border-radius:4px}::-webkit-scrollbar-thumb:hover{background:var(--color-border-gold)}h1,h2,h3,h4,h5,h6{font-family:var(--font-title);color:var(--color-accent);font-weight:bold}h1{font-size:var(--font-size-2xl)}h2{font-size:var(--font-size-xl)}h3{font-size:var(--font-size-lg)}p{line-height:1.8;margin-bottom:var(--spacing-md)}em{color:var(--color-accent-light);font-style:italic}strong{color:var(--color-accent);font-weight:bold}button{font-family:var(--font-ui);cursor:pointer;border:none;outline:none;background:none;transition:var(--transition-normal)}button:disabled{cursor:not-allowed;opacity:.5}input,textarea{font-family:var(--font-body);font-size:var(--font-size-base);color:var(--color-text-primary);background:var(--color-bg-primary);border:1px solid var(--color-border);border-radius:var(--radius-sm);padding:var(--spacing-sm) var(--spacing-md);transition:var(--transition-normal)}input::placeholder,textarea::placeholder{color:var(--color-text-muted)}input:focus,textarea:focus{outline:none;border-color:var(--color-accent);box-shadow:0 0 0 2px rgba(212,175,55,.2)}input:disabled,textarea:disabled{opacity:.5;cursor:not-allowed}a{color:var(--color-accent);text-decoration:none;transition:var(--transition-fast)}a:hover{color:var(--color-accent-light);text-decoration:underline}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.text-primary{color:var(--color-text-primary)}.text-secondary{color:var(--color-text-secondary)}.text-muted{color:var(--color-text-muted)}.text-accent{color:var(--color-accent)}.flex{display:flex}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-sm{gap:var(--spacing-sm)}.gap-md{gap:var(--spacing-md)}.page-enter-active,.page-leave-active{transition:all var(--transition-normal)}.page-enter-from{opacity:0;transform:translateY(20px)}.page-leave-to{opacity:0;transform:translateY(-20px)}.overlay-enter-active,.overlay-leave-active{transition:opacity var(--transition-normal)}.overlay-enter-from,.overlay-leave-to{opacity:0}.global-overlay{position:fixed;inset:0;z-index:1000;background:var(--color-bg-overlay);backdrop-filter:blur(4px)}','']);const l=i},262(e,a){a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[e,o]of a)t[e]=o;return t}},264(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.main-view[data-v-cd976064]{display:flex;flex-direction:column;height:100%;gap:var(--spacing-md);padding:var(--spacing-md)}.story-section[data-v-cd976064]{flex:1;min-height:0;overflow:hidden}.story-section .story-panel[data-v-cd976064]{height:100%;display:flex;flex-direction:column}.story-section .story-content[data-v-cd976064]{flex:1;overflow-y:auto;padding:var(--spacing-md)}.story-section .story-content[data-v-cd976064]::-webkit-scrollbar{width:8px}.story-section .story-content[data-v-cd976064]::-webkit-scrollbar-track{background:var(--color-bg-primary)}.story-section .story-content[data-v-cd976064]::-webkit-scrollbar-thumb{background:var(--color-border-gold);border-radius:4px}.story-message[data-v-cd976064]{margin-bottom:var(--spacing-md);line-height:1.8;animation:fade-in-cd976064 .3s ease-out}.story-message.narration .narration-text[data-v-cd976064]{color:var(--color-text-primary)}.story-message.narration .narration-text[data-v-cd976064] em{color:var(--color-accent-light);font-style:italic}.story-message.narration .narration-text[data-v-cd976064] strong{color:var(--color-accent);font-weight:bold}.story-message.dialogue .dialogue-block[data-v-cd976064]{padding-left:var(--spacing-md);border-left:3px solid var(--color-accent)}.story-message.dialogue .dialogue-block .speaker-name[data-v-cd976064]{color:var(--color-accent);font-weight:bold;margin-right:var(--spacing-sm)}.story-message.dialogue .dialogue-block .speaker-name[data-v-cd976064]::after{content:"ï¼š"}.story-message.dialogue .dialogue-block .dialogue-text[data-v-cd976064]{color:var(--color-text-primary)}.story-message.system .system-message[data-v-cd976064]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm);background:rgba(70,130,180,.1);border-radius:var(--radius-sm);color:var(--color-info);font-size:var(--font-size-sm)}.story-message.system .system-message .system-icon[data-v-cd976064]{font-size:16px}.loading-indicator[data-v-cd976064]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-lg);color:var(--color-text-secondary)}.action-section[data-v-cd976064]{flex-shrink:0}.action-section .action-panel[data-v-cd976064]{padding:var(--spacing-md)}.action-section .action-options[data-v-cd976064]{display:flex;flex-wrap:wrap;gap:var(--spacing-sm);margin-bottom:var(--spacing-md)}.action-section .action-options .option-icon[data-v-cd976064]{color:var(--color-accent)}.action-section .battle-trigger-btn[data-v-cd976064]{width:100%;margin-bottom:var(--spacing-md)}.action-section .custom-input-area .input-wrapper[data-v-cd976064]{display:flex;gap:var(--spacing-sm)}.action-section .custom-input-area .input-wrapper input[data-v-cd976064]{flex:1}@keyframes fade-in-cd976064{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.battle-btn-enter-active[data-v-cd976064],.battle-btn-leave-active[data-v-cd976064]{transition:all .3s ease}.battle-btn-enter-from[data-v-cd976064],.battle-btn-leave-to[data-v-cd976064]{opacity:0;transform:scale(0.8)}.battle-panel-enter-active[data-v-cd976064]{transition:all .4s cubic-bezier(0.4, 0, 0.2, 1)}.battle-panel-leave-active[data-v-cd976064]{transition:all .3s ease}.battle-panel-enter-from[data-v-cd976064]{opacity:0;transform:translateY(100%)}.battle-panel-leave-to[data-v-cd976064]{opacity:0;transform:scale(0.95)}','']);const l=i},314(e){e.exports=function(e){var a=[];return a.toString=function(){return this.map(function(a){var t='',o=void 0!==a[5];return a[4]&&(t+='@supports ('.concat(a[4],') {')),a[2]&&(t+='@media '.concat(a[2],' {')),o&&(t+='@layer'.concat(a[5].length>0?' '.concat(a[5]):'',' {')),t+=e(a),o&&(t+='}'),a[2]&&(t+='}'),a[4]&&(t+='}'),t}).join('')},a.i=function(e,t,o,r,n){'string'==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(i[c]=!0)}for(var s=0;s<e.length;s++){var d=[].concat(e[s]);o&&i[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]='@layer'.concat(d[5].length>0?' '.concat(d[5]):'',' {').concat(d[1],'}')),d[5]=n),t&&(d[2]?(d[1]='@media '.concat(d[2],' {').concat(d[1],'}'),d[2]=t):d[2]=t),r&&(d[4]?(d[1]='@supports ('.concat(d[4],') {').concat(d[1],'}'),d[4]=r):d[4]=''.concat(r)),a.push(d))}},a}},341(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.battle-panel-overlay[data-v-8635a8f4]{position:fixed;inset:0;z-index:1000;display:flex;flex-direction:column;background:var(--color-bg-overlay);backdrop-filter:blur(4px)}.battle-panel[data-v-8635a8f4]{flex:1;display:flex;flex-direction:column;margin:var(--spacing-md);background:var(--gradient-panel);border:2px solid var(--color-border-gold);border-radius:var(--radius-lg);overflow:hidden;position:relative}.battle-header[data-v-8635a8f4]{padding:var(--spacing-md);flex-shrink:0}.battle-header .header-content[data-v-8635a8f4]{text-align:center;padding:var(--spacing-sm)}.battle-header .battle-title[data-v-8635a8f4]{margin:0;font-size:var(--font-size-xl);color:var(--color-accent);font-family:var(--font-title)}.battle-header .battle-title .title-ornament[data-v-8635a8f4]{margin:0 var(--spacing-sm)}.battle-body[data-v-8635a8f4]{flex:1;display:flex;flex-direction:column;overflow:hidden;padding:var(--spacing-md);gap:var(--spacing-md)}.enemy-section .section-label[data-v-8635a8f4],.ally-section .section-label[data-v-8635a8f4]{text-align:center;font-size:var(--font-size-sm);color:var(--color-text-secondary);margin-bottom:var(--spacing-sm)}.enemy-section .units-row[data-v-8635a8f4],.ally-section .units-row[data-v-8635a8f4]{display:flex;justify-content:center;gap:var(--spacing-md);flex-wrap:wrap}.battle-log-section[data-v-8635a8f4]{flex:1;min-height:100px;overflow:hidden}.battle-footer[data-v-8635a8f4]{padding:var(--spacing-md);border-top:1px solid var(--color-border);flex-shrink:0}.enemy-turn-indicator[data-v-8635a8f4]{display:flex;justify-content:center;align-items:center;gap:var(--spacing-sm);color:var(--color-text-secondary)}.battle-result[data-v-8635a8f4]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-md)}.battle-result .result-victory[data-v-8635a8f4],.battle-result .result-defeat[data-v-8635a8f4]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:var(--font-size-xl);font-family:var(--font-title)}.battle-result .result-victory .result-icon[data-v-8635a8f4],.battle-result .result-defeat .result-icon[data-v-8635a8f4]{font-size:32px}.battle-result .result-victory[data-v-8635a8f4]{color:var(--color-success)}.battle-result .result-victory .result-text[data-v-8635a8f4]{text-shadow:0 0 10px var(--color-success)}.battle-result .result-defeat[data-v-8635a8f4]{color:var(--color-danger)}.battle-result .result-defeat .result-text[data-v-8635a8f4]{text-shadow:0 0 10px var(--color-danger)}.collapse-btn[data-v-8635a8f4]{position:absolute;bottom:calc(var(--spacing-md) + 60px);left:50%;transform:translateX(-50%);padding:var(--spacing-xs) var(--spacing-md);background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-sm);color:var(--color-text-secondary);cursor:pointer;transition:var(--transition-normal);font-size:var(--font-size-sm)}.collapse-btn[data-v-8635a8f4]:hover{color:var(--color-text-primary);border-color:var(--color-accent)}','']);const l=i},359(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.bottom-nav-bar[data-v-124d61ea]{position:relative;padding:var(--spacing-sm) var(--spacing-md);padding-bottom:calc(var(--spacing-sm) + env(safe-area-inset-bottom, 0px));background:linear-gradient(180deg, var(--color-bg-secondary) 0%, var(--color-bg-primary) 100%);border-top:1px solid var(--color-border)}.nav-decoration[data-v-124d61ea]{position:absolute;top:-5px;left:0;right:0;height:10px;color:var(--color-border-gold);opacity:.5}.nav-decoration svg[data-v-124d61ea]{width:100%;height:100%}.nav-items[data-v-124d61ea]{display:flex;justify-content:space-around;align-items:center}.nav-item[data-v-124d61ea]{position:relative;display:flex;flex-direction:column;align-items:center;gap:4px;padding:var(--spacing-sm) var(--spacing-md);background:none;border:none;cursor:pointer;transition:var(--transition-normal);-webkit-tap-highlight-color:rgba(0,0,0,0)}.nav-item .nav-icon[data-v-124d61ea]{font-size:24px;transition:transform var(--transition-normal)}.nav-item .nav-label[data-v-124d61ea]{font-size:var(--font-size-xs);color:var(--color-text-secondary);transition:color var(--transition-normal)}.nav-item:hover .nav-icon[data-v-124d61ea]{transform:scale(1.1)}.nav-item:hover .nav-label[data-v-124d61ea]{color:var(--color-text-primary)}.nav-item:active .nav-icon[data-v-124d61ea]{transform:scale(0.95)}.nav-item.active .nav-icon[data-v-124d61ea]{transform:scale(1.15)}.nav-item.active .nav-label[data-v-124d61ea]{color:var(--color-accent);font-weight:bold}.active-indicator[data-v-124d61ea]{position:absolute;bottom:0;left:50%;transform:translateX(-50%);width:40px;height:3px}.active-indicator .indicator-glow[data-v-124d61ea]{width:100%;height:100%;background:var(--color-accent);border-radius:2px;box-shadow:0 0 10px var(--color-accent)}.indicator-enter-active[data-v-124d61ea],.indicator-leave-active[data-v-124d61ea]{transition:all var(--transition-normal)}.indicator-enter-from[data-v-124d61ea],.indicator-leave-to[data-v-124d61ea]{opacity:0;transform:translateX(-50%) scaleX(0)}','']);const l=i},407(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'@keyframes pulse-glow{0%,100%{box-shadow:0 0 10px var(--color-accent)}50%{box-shadow:0 0 25px var(--color-accent),0 0 40px var(--color-accent)}}@keyframes danger-pulse{0%,100%{box-shadow:0 0 10px var(--color-danger)}50%{box-shadow:0 0 25px var(--color-danger),0 0 40px var(--color-danger)}}@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes fade-in{from{opacity:0}to{opacity:1}}@keyframes slide-up{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes slide-down{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes scale-in{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}@keyframes blink{0%,50%{opacity:1}51%,100%{opacity:0}}@keyframes float-particle{0%,100%{transform:translateY(0) rotate(0deg);opacity:.6}50%{transform:translateY(-20px) rotate(180deg);opacity:1}}@keyframes magic-circle-spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}}@keyframes flash{0%,100%{opacity:1}50%{opacity:.5;filter:brightness(2)}}.animate-pulse-glow{animation:pulse-glow 2s infinite}.animate-danger-pulse{animation:danger-pulse 1.5s infinite}.animate-bounce{animation:bounce 1s infinite}.animate-float{animation:float 3s ease-in-out infinite}.animate-spin{animation:spin 1s linear infinite}.animate-fade-in{animation:fade-in .3s ease-out}.animate-slide-up{animation:slide-up .3s ease-out}.animate-shake{animation:shake .5s ease-in-out}.animate-flash{animation:flash .3s ease-in-out}','']);const l=i},485(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,':root{--color-primary: #2C1810;--color-primary-light: #4A3728;--color-primary-dark: #1A0E08;--color-accent: #D4AF37;--color-accent-light: #F4D03F;--color-accent-dark: #996515;--color-success: #4A7C59;--color-danger: #8B0000;--color-warning: #CC7722;--color-info: #4682B4;--color-success-rgb: 74, 124, 89;--color-danger-rgb: 139, 0, 0;--color-warning-rgb: 204, 119, 34;--color-info-rgb: 70, 130, 180;--color-text-primary: #E8DCC4;--color-text-secondary: #A89880;--color-text-muted: #6B5B4F;--color-bg-primary: #1A0E08;--color-bg-secondary: #2C1810;--color-bg-card: #3D2817;--color-bg-overlay: rgba(0, 0, 0, 0.7);--color-border: #5C4033;--color-border-gold: #D4AF37;--gradient-parchment: linear-gradient( 135deg, #3D2817 0%, #2C1810 50%, #1A0E08 100% );--gradient-gold: linear-gradient( 180deg, #F4D03F 0%, #D4AF37 50%, #996515 100% );--gradient-panel: linear-gradient( 180deg, rgba(61, 40, 23, 0.95) 0%, rgba(26, 14, 8, 0.98) 100% );--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--radius-sm: 4px;--radius-md: 8px;--radius-lg: 12px;--radius-xl: 16px;--font-title: \'Cinzel Decorative\', \'ZCOOL XiaoWei\', \'Noto Serif SC\', serif;--font-body: \'Noto Serif SC\', \'Source Han Serif CN\', serif;--font-ui: \'Spectral\', \'Noto Sans SC\', sans-serif;--font-size-xs: 12px;--font-size-sm: 14px;--font-size-base: 16px;--font-size-lg: 18px;--font-size-xl: 24px;--font-size-2xl: 32px;--shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.3);--shadow-md: 0 4px 8px rgba(0, 0, 0, 0.4);--shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.5);--shadow-glow: 0 0 20px var(--color-accent);--transition-fast: 0.15s ease;--transition-normal: 0.3s ease;--transition-slow: 0.5s ease}#telain-app{width:100%;height:100vh;overflow:hidden}.notifications-container{position:fixed;top:var(--spacing-lg);right:var(--spacing-lg);z-index:10000;display:flex;flex-direction:column;gap:var(--spacing-sm);pointer-events:none}.notification{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background:var(--color-bg-card);border:1px solid var(--color-border);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);pointer-events:auto;min-width:200px}.notification .notification-icon{width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;font-size:var(--font-size-sm);font-weight:bold}.notification .notification-text{flex:1;color:var(--color-text-primary);font-size:var(--font-size-sm)}.notification.info{border-color:var(--color-info)}.notification.info .notification-icon{background:var(--color-info);color:#fff}.notification.success{border-color:var(--color-success)}.notification.success .notification-icon{background:var(--color-success);color:#fff}.notification.warning{border-color:var(--color-warning)}.notification.warning .notification-icon{background:var(--color-warning);color:#fff}.notification.error{border-color:var(--color-danger)}.notification.error .notification-icon{background:var(--color-danger);color:#fff}.notification-enter-active,.notification-leave-active{transition:all .3s ease}.notification-enter-from{opacity:0;transform:translateX(100%)}.notification-leave-to{opacity:0;transform:translateX(100%)}.notification-move{transition:transform .3s ease}','']);const l=i},536(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.placeholder-view[data-v-d5fe789c]{height:100%;padding:var(--spacing-md);display:flex;align-items:center;justify-content:center}.placeholder-view .placeholder-panel[data-v-d5fe789c]{width:100%;max-width:400px}.placeholder-view .placeholder-content[data-v-d5fe789c]{padding:var(--spacing-xl);text-align:center}.placeholder-view .placeholder-content .placeholder-icon[data-v-d5fe789c]{font-size:64px;display:block;margin-bottom:var(--spacing-md)}.placeholder-view .placeholder-content h2[data-v-d5fe789c]{color:var(--color-accent);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content p[data-v-d5fe789c]{color:var(--color-text-secondary);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content .coming-soon[data-v-d5fe789c]{color:var(--color-text-muted);font-style:italic;margin-top:var(--spacing-lg)}','']);const l=i},540(e){e.exports=function(e){var a=document.createElement('style');return e.setAttributes(a,e.attributes),e.insert(a,e.options),a}},565(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.placeholder-view[data-v-0da528fe]{height:100%;padding:var(--spacing-md);display:flex;align-items:center;justify-content:center}.placeholder-view .placeholder-panel[data-v-0da528fe]{width:100%;max-width:400px}.placeholder-view .placeholder-content[data-v-0da528fe]{padding:var(--spacing-xl);text-align:center}.placeholder-view .placeholder-content .placeholder-icon[data-v-0da528fe]{font-size:64px;display:block;margin-bottom:var(--spacing-md)}.placeholder-view .placeholder-content h2[data-v-0da528fe]{color:var(--color-accent);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content p[data-v-0da528fe]{color:var(--color-text-secondary);margin-bottom:var(--spacing-sm)}.placeholder-view .placeholder-content .coming-soon[data-v-0da528fe]{color:var(--color-text-muted);font-style:italic;margin-top:var(--spacing-lg)}','']);const l=i},571(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.parchment-panel[data-v-1535ec3e]{position:relative;border-radius:var(--radius-md);overflow:hidden}.panel-background[data-v-1535ec3e]{position:absolute;inset:0;background:var(--gradient-parchment);border:1px solid var(--color-border);border-radius:inherit}.panel-content[data-v-1535ec3e]{position:relative;z-index:1}.with-border .panel-background[data-v-1535ec3e]{border-width:2px;border-color:var(--color-border-gold);box-shadow:inset 0 0 20px rgba(0,0,0,.3)}.panel-corners[data-v-1535ec3e]{position:absolute;inset:0;pointer-events:none}.panel-corners .corner[data-v-1535ec3e]{position:absolute;width:20px;height:20px}.panel-corners .corner[data-v-1535ec3e]::before{content:"âšœï¸";position:absolute;font-size:12px;color:var(--color-accent);opacity:.6}.panel-corners .corner.top-left[data-v-1535ec3e]{top:4px;left:4px}.panel-corners .corner.top-right[data-v-1535ec3e]{top:4px;right:4px}.panel-corners .corner.top-right[data-v-1535ec3e]::before{right:0}.panel-corners .corner.bottom-left[data-v-1535ec3e]{bottom:4px;left:4px}.panel-corners .corner.bottom-right[data-v-1535ec3e]{bottom:4px;right:4px}.panel-corners .corner.bottom-right[data-v-1535ec3e]::before{right:0}','']);const l=i},601(e){e.exports=function(e){return e[1]}},610(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.action-menu[data-v-bc86c076]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.action-buttons[data-v-bc86c076]{display:flex;justify-content:center;gap:var(--spacing-sm);flex-wrap:wrap}.action-buttons .magic-button[data-v-bc86c076]{min-width:80px}.action-buttons .action-icon[data-v-bc86c076]{margin-right:var(--spacing-xs)}.target-selection[data-v-bc86c076]{display:flex;justify-content:center;align-items:center;gap:var(--spacing-lg)}.target-selection .selection-prompt[data-v-bc86c076]{display:flex;align-items:center;gap:var(--spacing-sm);color:var(--color-accent);animation:pulse-bc86c076 1.5s infinite}.target-selection .selection-prompt .prompt-icon[data-v-bc86c076]{font-size:20px}.target-selection .selection-prompt .prompt-text[data-v-bc86c076]{font-size:var(--font-size-base);font-weight:bold}@keyframes pulse-bc86c076{0%,100%{opacity:1}50%{opacity:.6}}','']);const l=i},659(e){var a={};e.exports=function(e,t){var o=function(e){if(void 0===a[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}a[e]=t}return a[e]}(e);if(!o)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insert\' parameter is invalid.');o.appendChild(t)}},709(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.unit-card[data-v-789af309]{position:relative;width:100px;cursor:default;transition:var(--transition-normal)}.unit-card.selectable[data-v-789af309]{cursor:pointer}.unit-card.selectable[data-v-789af309]:hover{transform:scale(1.05)}.unit-card.selectable:hover .card-border[data-v-789af309]{border-color:var(--color-danger);box-shadow:0 0 15px var(--color-danger)}.unit-card.active .card-border[data-v-789af309]{border-color:var(--color-accent)}.unit-card.current-turn[data-v-789af309]{transform:scale(1.05)}.unit-card.current-turn .card-border[data-v-789af309]{border-color:var(--color-accent);box-shadow:0 0 20px var(--color-accent);animation:glow-pulse-789af309 2s infinite}.unit-card.defeated[data-v-789af309]{opacity:.6;filter:grayscale(80%);pointer-events:none}.card-border[data-v-789af309]{position:relative;background:var(--gradient-panel);border:2px solid var(--color-border);border-radius:var(--radius-md);padding:var(--spacing-xs);transition:var(--transition-normal)}.card-border.frame-normal[data-v-789af309]{border-color:#8b7355}.card-border.frame-elite[data-v-789af309]{border-color:#4169e1;box-shadow:0 0 10px rgba(65,105,225,.3)}.card-border.frame-legendary[data-v-789af309]{border-color:gold;box-shadow:0 0 15px rgba(255,215,0,.4)}.corner-ornament[data-v-789af309]{position:absolute;font-size:8px;color:var(--color-border-gold);opacity:.5}.corner-ornament.top-left[data-v-789af309]{top:2px;left:2px}.corner-ornament.top-right[data-v-789af309]{top:2px;right:2px}.corner-ornament.bottom-left[data-v-789af309]{bottom:2px;left:2px}.corner-ornament.bottom-right[data-v-789af309]{bottom:2px;right:2px}.card-content[data-v-789af309]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.portrait-area[data-v-789af309]{position:relative;width:60px;height:60px;margin:0 auto;border-radius:var(--radius-sm);overflow:hidden;background:var(--color-bg-primary)}.portrait-area .portrait[data-v-789af309]{width:100%;height:100%;background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center}.portrait-area .portrait .unit-icon[data-v-789af309]{font-size:28px}.portrait-area .defeated-overlay[data-v-789af309]{position:absolute;inset:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;color:var(--color-danger);font-weight:bold;font-size:var(--font-size-sm)}.portrait-area .defending-badge[data-v-789af309]{position:absolute;top:2px;right:2px;font-size:14px;filter:drop-shadow(0 0 2px rgba(0, 0, 0, 0.5))}.info-area[data-v-789af309]{text-align:center}.info-area .unit-name[data-v-789af309]{font-size:var(--font-size-xs);font-weight:bold;color:var(--color-text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.info-area .unit-stats[data-v-789af309]{display:flex;justify-content:center;gap:2px;font-size:9px;color:var(--color-text-secondary)}.info-area .unit-stats .stat[data-v-789af309]{background:var(--color-bg-primary);padding:1px 3px;border-radius:2px}.info-area .unit-type[data-v-789af309]{font-size:10px;color:var(--color-text-secondary);margin-top:2px}.hp-bar[data-v-789af309]{height:4px;background:var(--color-bg-primary);border-radius:2px;overflow:hidden;margin-top:var(--spacing-xs)}.hp-bar .hp-fill[data-v-789af309]{height:100%;transition:width .3s ease;border-radius:2px}.hp-bar .hp-fill.healthy[data-v-789af309]{background:linear-gradient(90deg, #4A7C59, #6B8E23)}.hp-bar .hp-fill.warning[data-v-789af309]{background:linear-gradient(90deg, #CC7722, #DAA520)}.hp-bar .hp-fill.critical[data-v-789af309]{background:linear-gradient(90deg, #8B0000, #CD5C5C);animation:critical-pulse-789af309 1s infinite}.turn-indicator[data-v-789af309]{position:absolute;bottom:-22px;left:50%;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center;color:var(--color-accent)}.turn-indicator .indicator-arrow[data-v-789af309]{font-size:10px;animation:bounce-789af309 1s infinite}.turn-indicator .indicator-text[data-v-789af309]{font-size:9px}@keyframes glow-pulse-789af309{0%,100%{box-shadow:0 0 10px var(--color-accent)}50%{box-shadow:0 0 25px var(--color-accent)}}@keyframes bounce-789af309{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}@keyframes critical-pulse-789af309{0%,100%{opacity:1}50%{opacity:.7}}.turn-indicator-enter-active[data-v-789af309],.turn-indicator-leave-active[data-v-789af309]{transition:all .3s ease}.turn-indicator-enter-from[data-v-789af309],.turn-indicator-leave-to[data-v-789af309]{opacity:0;transform:translateX(-50%) translateY(10px)}','']);const l=i},781(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.gold-border-container[data-v-174e1afc]{position:relative;background:var(--color-bg-card);border:2px solid var(--color-border-gold);border-radius:var(--radius-md);box-shadow:inset 0 0 20px rgba(212,175,55,.1),0 4px 10px rgba(0,0,0,.3)}.border-decoration[data-v-174e1afc]{position:absolute;width:16px;height:16px;border:2px solid var(--color-accent);pointer-events:none}.border-decoration.top-left[data-v-174e1afc]{top:-3px;left:-3px;border-right:none;border-bottom:none;border-top-left-radius:var(--radius-md)}.border-decoration.top-right[data-v-174e1afc]{top:-3px;right:-3px;border-left:none;border-bottom:none;border-top-right-radius:var(--radius-md)}.border-decoration.bottom-left[data-v-174e1afc]{bottom:-3px;left:-3px;border-right:none;border-top:none;border-bottom-left-radius:var(--radius-md)}.border-decoration.bottom-right[data-v-174e1afc]{bottom:-3px;right:-3px;border-left:none;border-top:none;border-bottom-right-radius:var(--radius-md)}.gold-border-content[data-v-174e1afc]{position:relative}','']);const l=i},825(e){e.exports=function(e){if('undefined'==typeof document)return{update:function(){},remove:function(){}};var a=e.insertStyleElement(e);return{update:function(t){!function(e,a,t){var o='';t.supports&&(o+='@supports ('.concat(t.supports,') {')),t.media&&(o+='@media '.concat(t.media,' {'));var r=void 0!==t.layer;r&&(o+='@layer'.concat(t.layer.length>0?' '.concat(t.layer):'',' {')),o+=t.css,r&&(o+='}'),t.media&&(o+='}'),t.supports&&(o+='}');var n=t.sourceMap;n&&'undefined'!=typeof btoa&&(o+='\n/*# sourceMappingURL=data:application/json;base64,'.concat(btoa(unescape(encodeURIComponent(JSON.stringify(n)))),' */')),a.styleTagTransform(o,e,a.options)}(a,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)}}}},864(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.magic-button[data-v-42a6b8fe]{position:relative;display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-lg);font-family:var(--font-ui);font-size:var(--font-size-base);color:var(--color-text-primary);background:var(--color-bg-card);border:2px solid var(--color-border);border-radius:var(--radius-md);cursor:pointer;overflow:hidden;transition:var(--transition-normal)}.magic-button[data-v-42a6b8fe]:hover:not(.disabled){border-color:var(--color-accent);transform:translateY(-2px)}.magic-button:hover:not(.disabled) .button-glow[data-v-42a6b8fe]{opacity:.3}.magic-button[data-v-42a6b8fe]:active:not(.disabled){transform:translateY(0)}.magic-button.disabled[data-v-42a6b8fe]{opacity:.5;cursor:not-allowed}.magic-button.primary[data-v-42a6b8fe]{background:var(--gradient-gold);border-color:var(--color-accent-dark);color:var(--color-bg-primary);font-weight:bold}.magic-button.primary[data-v-42a6b8fe]:hover:not(.disabled){box-shadow:var(--shadow-glow)}.magic-button.battle[data-v-42a6b8fe]{background:linear-gradient(180deg, #8B0000 0%, #5C0000 100%);border-color:#f44;color:#fff;font-weight:bold;animation:pulse-glow-42a6b8fe 2s infinite}.magic-button.battle[data-v-42a6b8fe]:hover:not(.disabled){animation:none;box-shadow:0 0 30px var(--color-danger)}@keyframes pulse-glow-42a6b8fe{0%,100%{box-shadow:0 0 10px var(--color-danger)}50%{box-shadow:0 0 25px var(--color-danger)}}.magic-button.small[data-v-42a6b8fe]{padding:var(--spacing-xs) var(--spacing-md);font-size:var(--font-size-sm)}.magic-button.ghost[data-v-42a6b8fe]{background:rgba(0,0,0,0);border-color:rgba(0,0,0,0)}.magic-button.ghost[data-v-42a6b8fe]:hover:not(.disabled){background:hsla(0,0%,100%,.05);border-color:var(--color-border)}.button-content[data-v-42a6b8fe]{position:relative;z-index:1;display:flex;align-items:center;gap:var(--spacing-xs)}.button-glow[data-v-42a6b8fe]{position:absolute;inset:0;background:radial-gradient(circle at center, var(--color-accent) 0%, transparent 70%);opacity:0;transition:opacity var(--transition-normal);pointer-events:none}.button-loading[data-v-42a6b8fe]{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:inherit}.button-loading .loading-spinner[data-v-42a6b8fe]{width:20px;height:20px;border:2px solid var(--color-text-muted);border-top-color:var(--color-accent);border-radius:50%;animation:spin-42a6b8fe .8s linear infinite}@keyframes spin-42a6b8fe{to{transform:rotate(360deg)}}.loading .button-content[data-v-42a6b8fe]{opacity:0}','']);const l=i},886(e,a,t){t.d(a,{A:()=>l});var o=t(601),r=t.n(o),n=t(314),i=t.n(n)()(r());i.push([e.id,'.ornament-divider[data-v-73323c0e]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-xs) 0;opacity:.6}.ornament-divider .divider-line[data-v-73323c0e]{flex:1;height:1px;background:linear-gradient(90deg, transparent, var(--color-accent) 50%, transparent)}.ornament-divider .divider-line.left[data-v-73323c0e]{background:linear-gradient(90deg, transparent, var(--color-accent))}.ornament-divider .divider-line.right[data-v-73323c0e]{background:linear-gradient(90deg, var(--color-accent), transparent)}.ornament-divider .divider-ornament[data-v-73323c0e]{color:var(--color-accent);font-size:var(--font-size-xs)}.ornament-divider.top .divider-ornament[data-v-73323c0e]{font-size:10px}.ornament-divider.bottom .divider-ornament[data-v-73323c0e]{font-size:10px}.ornament-divider.simple .divider-ornament[data-v-73323c0e]{font-size:8px}','']);const l=i}},a={};function t(o){var r=a[o];if(void 0!==r)return r.exports;var n=a[o]={id:o,exports:{}};return e[o](n,n.exports,t),n.exports}t.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return t.d(a,{a}),a},t.d=(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.nc=void 0;const o=Vue,r=Pinia;async function n(e,a={}){const{onSuccess:t,onError:o}=a;try{await window.TavernHelper.createChatMessages([{role:'user',message:e}]);const a=await window.TavernHelper.generate({user_input:e});return await window.TavernHelper.createChatMessages([{role:'assistant',message:a}]),t&&t(a),a}catch(e){throw console.error('[MessageService] å‘é€æ¶ˆæ¯å¤±è´¥:',e),o&&o(e),e}}function i(e){const a=[],t=/[ã€\[](é€‰é¡¹|é€‰æ‹©|è¡ŒåŠ¨)[ï¼š:]\s*([^\]ã€‘]+)[ã€‘\]]/g;let o;for(;null!==(o=t.exec(e));)a.push({label:o[2].trim(),action:o[2].trim()});if(0===a.length){const t=/^\s*(\d+)[\.ã€)]\s*(.+)$/gm;for(;null!==(o=t.exec(e));){const e=o[2].trim();e.length<30&&a.push({label:e,action:e})}}return a}function l(e){const a=e.match(/```json\s*([\s\S]*?)\s*```/);if(a)try{const e=JSON.parse(a[1]);if('battle'===e.type||e.enemies)return e}catch(e){console.warn('[MessageService] è§£ææˆ˜æ–—é…ç½®JSONå¤±è´¥:',e)}return e.includes('æˆ˜æ–—å¼€å§‹')||e.includes('é­é‡æ•Œäºº')?{type:'battle',trigger:'encounter'}:null}const c=(0,r.defineStore)('game',()=>{const e=(0,o.ref)(!1),a=(0,o.ref)([{type:'narration',content:'*æ„è¯†é€æ¸æ¢å¤ï¼Œåˆºçœ¼çš„é˜³å…‰é€è¿‡çœ¼çš®ç…§å°„è¿›æ¥ã€‚*\n\nä½ èººåœ¨ä¸€ç‰‡è‰åœ°ä¸Šï¼Œå››å‘¨æ˜¯éƒéƒè‘±è‘±çš„æ£®æ—ã€‚è¿œå¤„ï¼Œä¸€åº§ä¸­ä¸–çºªé£æ ¼çš„åŸé•‡è‹¥éšè‹¥ç°ã€‚'},{type:'dialogue',speaker:'???',content:'ä½ é†’äº†ï¼Ÿ'},{type:'narration',content:'ä¸€ä¸ªå¹´è½»å¥³æ€§çš„å£°éŸ³ä»æ—è¾¹ä¼ æ¥ã€‚ä½ è½¬å¤´æœ›å»ï¼Œçœ‹åˆ°ä¸€ä½èº«ç©¿é“¶è‰²ç›”ç”²çš„å¥³éª‘å£«æ­£è¹²åœ¨ä½ èº«è¾¹ï¼Œç¥æƒ…ä¸­å¸¦ç€å…³åˆ‡å’Œå¥½å¥‡ã€‚'}]),t=(0,o.ref)([{label:'ä¸å¥¹å¯¹è¯',action:'å‘å¥¹è¯¢é—®è¿™æ˜¯å“ªé‡Œ'},{label:'æ£€æŸ¥å‘¨å›´',action:'è§‚å¯Ÿå››å‘¨ç¯å¢ƒ'},{label:'å°è¯•ç«™èµ·æ¥',action:'å°è¯•ä»åœ°ä¸Šç«™èµ·æ¥'}]),r=(0,o.ref)(null),c=(0,o.ref)({player:{name:'å†’é™©è€…',level:1,exp:0},resources:{gold:100,supplies:10},progress:{chapter:1,location:'æœªçŸ¥è‰åœ°',mainQuest:'è°ƒæŸ¥è‡ªå·±çš„å¤„å¢ƒ'}}),s=(0,o.ref)({commanders:[{id:'player',name:'{{user}}',portrait:null,attributes:{leadership:10,tactics:5,bravery:8},skills:[],unit:{type:'å‰‘å£«',currentCount:20,maxCount:30,atk:10,def:8,spd:5,hp:15}}]}),d=(0,o.computed)(()=>c.value.player.name),p=(0,o.computed)(()=>c.value.progress.location),m=(0,o.computed)(()=>c.value.resources.gold),v=(0,o.computed)(()=>c.value.resources.supplies),u=(0,o.computed)(()=>c.value.progress.chapter),g=e=>{a.value.push(e)},f=e=>{g({type:'narration',content:e})},b=e=>{g({type:'system',content:e})},h=e=>{t.value=e},y=()=>{t.value=[]},x=e=>{r.value=e},k=async a=>{if(!e.value){e.value=!0,y(),g({type:'action',content:a});try{const e=await n(a);f(e);const t=i(e);t.length>0&&h(t);const o=l(e);o&&x(o),w()}catch(e){console.error('[TelainRPG] æ‰§è¡Œè¡ŒåŠ¨å¤±è´¥:',e),b('æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')}finally{e.value=!1}}},w=()=>{try{const e=window.SillyTavern?.getContext?.();e?.chatMetadata&&(e.chatMetadata.telainGameState={storyMessages:a.value,gameState:c.value,army:s.value},e.saveMetadata?.())}catch(e){console.warn('[TelainRPG] Failed to save to ST:',e)}};return{storyMessages:a,actionOptions:t,currentBattleConfig:r,gameState:c,army:s,isLoading:e,playerName:d,currentLocation:p,gold:m,supplies:v,chapter:u,addMessage:g,addNarration:f,addDialogue:(e,a)=>{g({type:'dialogue',speaker:e,content:a})},addSystemMessage:b,setActionOptions:h,clearActionOptions:y,setBattleConfig:x,clearBattleConfig:()=>{r.value=null},updateResources:e=>{void 0!==e.gold&&(c.value.resources.gold+=e.gold),void 0!==e.supplies&&(c.value.resources.supplies+=e.supplies)},updateLocation:e=>{c.value.progress.location=e},updateChapter:e=>{c.value.progress.chapter=e},executeAction:k,sendCustomInput:async a=>{!e.value&&a.trim()&&await k(a.trim())},saveToST:w,loadFromST:()=>{try{const e=window.SillyTavern?.getContext?.(),t=e?.chatMetadata?.telainGameState;if(t)return t.storyMessages&&(a.value=t.storyMessages),t.gameState&&(c.value=t.gameState),t.army&&(s.value=t.army),!0}catch(e){console.warn('[TelainRPG] Failed to load from ST:',e)}return!1}}}),s=(0,r.defineStore)('ui',()=>{const e=(0,o.ref)('main'),a=(0,o.ref)(!1),t=(0,o.ref)(''),r=(0,o.ref)([]),n=(0,o.ref)([]),i=(0,o.ref)({enableSound:!0,enableVibration:!0,textSpeed:'normal',autoScroll:!0}),l=(0,o.computed)(()=>r.value.length>0),c=(0,o.computed)(()=>r.value.length>0?r.value[r.value.length-1]:null),s=e=>{const a=n.value.findIndex(a=>a.id===e);-1!==a&&n.value.splice(a,1)},d=()=>{try{localStorage.setItem('telain-rpg-settings',JSON.stringify(i.value))}catch(e){console.warn('[TelainRPG] Failed to save settings:',e)}},p=()=>{try{const e=localStorage.getItem('telain-rpg-settings');e&&(i.value={...i.value,...JSON.parse(e)})}catch(e){console.warn('[TelainRPG] Failed to load settings:',e)}};return p(),{currentTab:e,isLoading:a,loadingMessage:t,overlays:r,notifications:n,settings:i,hasActiveOverlay:l,topOverlay:c,setTab:a=>{e.value=a},setLoading:(e,o='')=>{a.value=e,t.value=o},pushOverlay:e=>{r.value.push({id:Date.now(),...e})},popOverlay:()=>{r.value.pop()},clearOverlays:()=>{r.value=[]},addNotification:e=>{const a=Date.now();return n.value.push({id:a,type:'info',duration:3e3,...e}),0!==e.duration&&setTimeout(()=>{s(a)},e.duration||3e3),a},removeNotification:s,updateSettings:e=>{i.value={...i.value,...e},d()},saveSettings:d,loadSettings:p}}),d={class:'top-info-bar'},p={class:'info-bar-content'},m={class:'info-item location'},v={class:'info-text'},u={class:'info-item gold'},g={class:'info-value'},f={class:'info-item supplies'},b={class:'info-value'},h={class:'info-item chapter'},y={class:'info-text'},x={__name:'TopInfoBar',setup(e){const a=c(),{currentLocation:t,gold:n,supplies:i,chapter:l}=(0,r.storeToRefs)(a);return(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('header',d,[(0,o.createElementVNode)('div',p,[(0,o.createCommentVNode)(' Location '),(0,o.createElementVNode)('div',m,[a[0]||(a[0]=(0,o.createElementVNode)('span',{class:'info-icon'},'ğŸ“',-1)),(0,o.createElementVNode)('span',v,(0,o.toDisplayString)((0,o.unref)(t)),1)]),(0,o.createCommentVNode)(' Spacer '),a[3]||(a[3]=(0,o.createElementVNode)('div',{class:'info-spacer'},null,-1)),(0,o.createCommentVNode)(' Resources '),(0,o.createElementVNode)('div',u,[a[1]||(a[1]=(0,o.createElementVNode)('span',{class:'info-icon'},'ğŸ’°',-1)),(0,o.createElementVNode)('span',g,(0,o.toDisplayString)((0,o.unref)(n)),1)]),(0,o.createElementVNode)('div',f,[a[2]||(a[2]=(0,o.createElementVNode)('span',{class:'info-icon'},'ğŸ“¦',-1)),(0,o.createElementVNode)('span',b,(0,o.toDisplayString)((0,o.unref)(i)),1)]),(0,o.createCommentVNode)(' Chapter '),(0,o.createElementVNode)('div',h,[(0,o.createElementVNode)('span',y,'Ch.'+(0,o.toDisplayString)((0,o.unref)(l)),1)])]),(0,o.createCommentVNode)(' Decorative border '),a[4]||(a[4]=(0,o.createElementVNode)('div',{class:'bar-decoration'},[(0,o.createElementVNode)('svg',{viewBox:'0 0 100 10',preserveAspectRatio:'none'},[(0,o.createElementVNode)('path',{d:'M0,0 L40,0 L50,10 L60,0 L100,0',fill:'none',stroke:'currentColor','stroke-width':'1'})])],-1))]))}};var k=t(72),w=t.n(k),N=t(825),V=t.n(N),E=t(659),C=t.n(E),A=t(56),B=t.n(A),S=t(540),T=t.n(S),D=t(113),I=t.n(D),M=t(8),P={};P.styleTagTransform=I(),P.setAttributes=B(),P.insert=C().bind(null,'head'),P.domAPI=V(),P.insertStyleElement=T();w()(M.A,P);M.A&&M.A.locals&&M.A.locals;var L=t(262);const O=(0,L.A)(x,[['__scopeId','data-v-8835cc04']]),F={class:'bottom-nav-bar'},j={class:'nav-items'},Y=['onClick'],R={class:'nav-icon'},X={class:'nav-label'},H={key:0,class:'active-indicator'},G={__name:'BottomNavBar',props:{modelValue:{type:String,default:'main'}},emits:['update:modelValue'],setup(e,{emit:a}){const t=a,r=(0,o.ref)([{id:'main',icon:'ğŸ“œ',label:'ä¸»ç•Œé¢'},{id:'training',icon:'ğŸ’«',label:'è°ƒæ•™'},{id:'conquest',icon:'âš”ï¸',label:'å¾æœ'},{id:'formation',icon:'ğŸ°',label:'ç¼–åˆ¶'},{id:'development',icon:'ğŸ“ˆ',label:'å‘å±•'}]);return(a,n)=>((0,o.openBlock)(),(0,o.createElementBlock)('nav',F,[(0,o.createCommentVNode)(' Decorative top border '),n[1]||(n[1]=(0,o.createElementVNode)('div',{class:'nav-decoration'},[(0,o.createElementVNode)('svg',{viewBox:'0 0 100 10',preserveAspectRatio:'none'},[(0,o.createElementVNode)('path',{d:'M0,10 L40,10 L50,0 L60,10 L100,10',fill:'none',stroke:'currentColor','stroke-width':'1'})])],-1)),(0,o.createCommentVNode)(' Navigation items '),(0,o.createElementVNode)('div',j,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(r.value,a=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{key:a.id,class:(0,o.normalizeClass)(['nav-item',{active:e.modelValue===a.id}]),onClick:e=>{return o=a.id,void t('update:modelValue',o);var o}},[(0,o.createElementVNode)('span',R,(0,o.toDisplayString)(a.icon),1),(0,o.createElementVNode)('span',X,(0,o.toDisplayString)(a.label),1),(0,o.createCommentVNode)(' Active indicator '),(0,o.createVNode)(o.Transition,{name:'indicator'},{default:(0,o.withCtx)(()=>[e.modelValue===a.id?((0,o.openBlock)(),(0,o.createElementBlock)('div',H,[...n[0]||(n[0]=[(0,o.createElementVNode)('div',{class:'indicator-glow'},null,-1)])])):(0,o.createCommentVNode)('v-if',!0)]),_:2},1024)],10,Y))),128))])]))}};var U=t(359),q={};q.styleTagTransform=I(),q.setAttributes=B(),q.insert=C().bind(null,'head'),q.domAPI=V(),q.insertStyleElement=T();w()(U.A,q);U.A&&U.A.locals&&U.A.locals;const J=(0,L.A)(G,[['__scopeId','data-v-124d61ea']]),K={class:'panel-content'},W={key:0,class:'panel-corners'},Z={__name:'ParchmentPanel',props:{withBorder:{type:Boolean,default:!1}},setup:e=>(a,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['parchment-panel',{'with-border':e.withBorder}])},[t[1]||(t[1]=(0,o.createElementVNode)('div',{class:'panel-background'},null,-1)),(0,o.createElementVNode)('div',K,[(0,o.renderSlot)(a.$slots,'default')]),e.withBorder?((0,o.openBlock)(),(0,o.createElementBlock)('div',W,[...t[0]||(t[0]=[(0,o.createElementVNode)('span',{class:'corner top-left'},null,-1),(0,o.createElementVNode)('span',{class:'corner top-right'},null,-1),(0,o.createElementVNode)('span',{class:'corner bottom-left'},null,-1),(0,o.createElementVNode)('span',{class:'corner bottom-right'},null,-1)])])):(0,o.createCommentVNode)('v-if',!0)],2))};var Q=t(571),ee={};ee.styleTagTransform=I(),ee.setAttributes=B(),ee.insert=C().bind(null,'head'),ee.domAPI=V(),ee.insertStyleElement=T();w()(Q.A,ee);Q.A&&Q.A.locals&&Q.A.locals;const ae=(0,L.A)(Z,[['__scopeId','data-v-1535ec3e']]),te={class:'gold-border-container'},oe={class:'gold-border-content'};var re=t(781),ne={};ne.styleTagTransform=I(),ne.setAttributes=B(),ne.insert=C().bind(null,'head'),ne.domAPI=V(),ne.insertStyleElement=T();w()(re.A,ne);re.A&&re.A.locals&&re.A.locals;const ie={},le=(0,L.A)(ie,[['render',function(e,a){return(0,o.openBlock)(),(0,o.createElementBlock)('div',te,[a[0]||(a[0]=(0,o.createElementVNode)('div',{class:'border-decoration top-left'},null,-1)),a[1]||(a[1]=(0,o.createElementVNode)('div',{class:'border-decoration top-right'},null,-1)),a[2]||(a[2]=(0,o.createElementVNode)('div',{class:'border-decoration bottom-left'},null,-1)),a[3]||(a[3]=(0,o.createElementVNode)('div',{class:'border-decoration bottom-right'},null,-1)),(0,o.createElementVNode)('div',oe,[(0,o.renderSlot)(e.$slots,'default',{},void 0,!0)])])}],['__scopeId','data-v-174e1afc']]),ce={class:'divider-ornament'},se={__name:'OrnamentDivider',props:{type:{type:String,default:'normal',validator:e=>['normal','top','bottom','simple'].includes(e)}},setup(e){const a=e,t=(0,o.computed)(()=>({normal:'â—†',top:'â–¼',bottom:'â–²',simple:'â—'}[a.type]));return(a,r)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['ornament-divider',e.type])},[r[0]||(r[0]=(0,o.createElementVNode)('span',{class:'divider-line left'},null,-1)),(0,o.createElementVNode)('span',ce,(0,o.toDisplayString)(t.value),1),r[1]||(r[1]=(0,o.createElementVNode)('span',{class:'divider-line right'},null,-1))],2))}};var de=t(886),pe={};pe.styleTagTransform=I(),pe.setAttributes=B(),pe.insert=C().bind(null,'head'),pe.domAPI=V(),pe.insertStyleElement=T();w()(de.A,pe);de.A&&de.A.locals&&de.A.locals;const me=(0,L.A)(se,[['__scopeId','data-v-73323c0e']]),ve=['disabled'],ue={key:0,class:'button-loading'},ge={class:'button-content'},fe={__name:'MagicButton',props:{variant:{type:String,default:'default',validator:e=>['default','primary','battle','small','ghost'].includes(e)},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:['click'],setup(e,{emit:a}){const t=e,r=a,n=e=>{t.disabled||t.loading||r('click',e)};return(a,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('button',{class:(0,o.normalizeClass)(['magic-button',[e.variant,{disabled:e.disabled,loading:e.loading}]]),disabled:e.disabled||e.loading,onClick:n},[e.loading?((0,o.openBlock)(),(0,o.createElementBlock)('span',ue,[...t[0]||(t[0]=[(0,o.createElementVNode)('span',{class:'loading-spinner'},null,-1)])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createElementVNode)('span',ge,[(0,o.renderSlot)(a.$slots,'default')]),t[1]||(t[1]=(0,o.createElementVNode)('span',{class:'button-glow'},null,-1))],10,ve))}};var be=t(864),he={};he.styleTagTransform=I(),he.setAttributes=B(),he.insert=C().bind(null,'head'),he.domAPI=V(),he.insertStyleElement=T();w()(be.A,he);be.A&&be.A.locals&&be.A.locals;const ye=(0,L.A)(fe,[['__scopeId','data-v-42a6b8fe']]),xe={__name:'LoadingMagicCircle',props:{size:{type:String,default:'medium',validator:e=>['small','medium','large'].includes(e)}},setup:e=>(a,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['loading-magic-circle',e.size])},[...t[0]||(t[0]=[(0,o.createStaticVNode)('<div class="circle-outer" data-v-1d6ad6a4><div class="rune rune-1" data-v-1d6ad6a4>âœ§</div><div class="rune rune-2" data-v-1d6ad6a4>âœ¦</div><div class="rune rune-3" data-v-1d6ad6a4>âœ§</div><div class="rune rune-4" data-v-1d6ad6a4>âœ¦</div></div><div class="circle-inner" data-v-1d6ad6a4><div class="core-glow" data-v-1d6ad6a4></div></div>',2)])],2))};var ke=t(89),we={};we.styleTagTransform=I(),we.setAttributes=B(),we.insert=C().bind(null,'head'),we.domAPI=V(),we.insertStyleElement=T();w()(ke.A,we);ke.A&&ke.A.locals&&ke.A.locals;const Ne=(0,L.A)(xe,[['__scopeId','data-v-1d6ad6a4']]),Ve={class:'card-content'},Ee={class:'portrait-area'},Ce={key:0,class:'unit-icon'},Ae={key:0,class:'defeated-overlay'},Be={key:1,class:'defending-badge'},Se={class:'info-area'},Te={class:'unit-name'},ze={class:'unit-stats'},_e={class:'stat atk'},De={class:'stat def'},Ie={class:'stat spd'},Me={class:'unit-type'},Pe={class:'hp-bar'},Le={key:0,class:'turn-indicator'},Oe={__name:'UnitCard',props:{unit:{type:Object,required:!0},isEnemy:{type:Boolean,default:!1},isActive:{type:Boolean,default:!1},isCurrentTurn:{type:Boolean,default:!1},isSelectable:{type:Boolean,default:!1}},emits:['click'],setup(e){const a=e,t={å‰‘å£«:'âš”ï¸',å¼“ç®­æ‰‹:'ğŸ¹',éª‘å…µ:'ğŸ´',æ³•å¸ˆ:'ğŸ”®',ç‰§å¸ˆ:'âœ¨',å“¥å¸ƒæ—:'ğŸ‘¹',åº§ç‹¼:'ğŸº',å…½äºº:'ğŸ‘º',éª·é«…å…µ:'ğŸ’€',æš—å½±åˆºå®¢:'ğŸ—¡ï¸'},r=(0,o.computed)(()=>t[a.unit.unit?.type]||'ğŸ‘¤'),n=(0,o.computed)(()=>'frame-normal'),i=(0,o.computed)(()=>{const{currentCount:e,maxCount:t}=a.unit.unit||{};return e&&t?Math.round(e/t*100):100}),l=(0,o.computed)(()=>{const e=i.value;return e<=30?'critical':e<=60?'warning':'healthy'});return(a,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{class:(0,o.normalizeClass)(['unit-card',{enemy:e.isEnemy,ally:!e.isEnemy,active:e.isActive,'current-turn':e.isCurrentTurn,defeated:e.unit.isDefeated,selectable:e.isSelectable}]),onClick:t[0]||(t[0]=e=>a.$emit('click'))},[(0,o.createCommentVNode)(' Card Border '),(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['card-border',n.value])},[(0,o.createCommentVNode)(' Corner Ornaments '),t[1]||(t[1]=(0,o.createElementVNode)('div',{class:'corner-ornament top-left'},'âšœï¸',-1)),t[2]||(t[2]=(0,o.createElementVNode)('div',{class:'corner-ornament top-right'},'âšœï¸',-1)),t[3]||(t[3]=(0,o.createElementVNode)('div',{class:'corner-ornament bottom-left'},'âšœï¸',-1)),t[4]||(t[4]=(0,o.createElementVNode)('div',{class:'corner-ornament bottom-right'},'âšœï¸',-1))],2),(0,o.createCommentVNode)(' Card Content '),(0,o.createElementVNode)('div',Ve,[(0,o.createCommentVNode)(' Portrait Area '),(0,o.createElementVNode)('div',Ee,[(0,o.createElementVNode)('div',{class:'portrait',style:(0,o.normalizeStyle)({backgroundImage:e.unit.portrait?`url(${e.unit.portrait})`:'none'})},[(0,o.createCommentVNode)(' Unit Icon (when no portrait) '),e.unit.portrait?(0,o.createCommentVNode)('v-if',!0):((0,o.openBlock)(),(0,o.createElementBlock)('span',Ce,(0,o.toDisplayString)(r.value),1))],4),(0,o.createCommentVNode)(' Defeated Overlay '),e.unit.isDefeated?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ae,[...t[5]||(t[5]=[(0,o.createElementVNode)('span',null,'å‡»è´¥',-1)])])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Defending Badge '),e.unit.isDefending?((0,o.openBlock)(),(0,o.createElementBlock)('div',Be,[...t[6]||(t[6]=[(0,o.createElementVNode)('span',null,'ğŸ›¡ï¸',-1)])])):(0,o.createCommentVNode)('v-if',!0)]),(0,o.createCommentVNode)(' Info Area '),(0,o.createElementVNode)('div',Se,[(0,o.createCommentVNode)(' Name '),(0,o.createElementVNode)('div',Te,(0,o.toDisplayString)(e.unit.name),1),(0,o.createCommentVNode)(' Stats '),(0,o.createElementVNode)('div',ze,[(0,o.createElementVNode)('span',_e,'æ”»'+(0,o.toDisplayString)(e.unit.unit.atk),1),(0,o.createElementVNode)('span',De,'é˜²'+(0,o.toDisplayString)(e.unit.unit.def),1),(0,o.createElementVNode)('span',Ie,'é€Ÿ'+(0,o.toDisplayString)(e.unit.unit.spd),1)]),(0,o.createCommentVNode)(' Unit Type and Count '),(0,o.createElementVNode)('div',Me,' ['+(0,o.toDisplayString)(e.unit.unit.type)+'Ã—'+(0,o.toDisplayString)(e.unit.unit.currentCount)+'] ',1),(0,o.createCommentVNode)(' HP Bar '),(0,o.createElementVNode)('div',Pe,[(0,o.createElementVNode)('div',{class:(0,o.normalizeClass)(['hp-fill',l.value]),style:(0,o.normalizeStyle)({width:`${i.value}%`})},null,6)])])]),(0,o.createCommentVNode)(' Current Turn Indicator '),(0,o.createVNode)(o.Transition,{name:'turn-indicator'},{default:(0,o.withCtx)(()=>[e.isCurrentTurn?((0,o.openBlock)(),(0,o.createElementBlock)('div',Le,[...t[7]||(t[7]=[(0,o.createElementVNode)('span',{class:'indicator-arrow'},'â–²',-1),(0,o.createElementVNode)('span',{class:'indicator-text'},'è¡ŒåŠ¨ä¸­',-1)])])):(0,o.createCommentVNode)('v-if',!0)]),_:1})],2))}};var Fe=t(709),$e={};$e.styleTagTransform=I(),$e.setAttributes=B(),$e.insert=C().bind(null,'head'),$e.domAPI=V(),$e.insertStyleElement=T();w()(Fe.A,$e);Fe.A&&Fe.A.locals&&Fe.A.locals;const je=(0,L.A)(Oe,[['__scopeId','data-v-789af309']]),Ye={class:'battle-log'},Re={class:'log-header'},Xe={class:'log-message'},He={__name:'BattleLog',props:{logs:{type:Array,default:()=>[]}},setup(e){const a=e,t=(0,o.ref)(null);return(0,o.watch)(()=>a.logs.length,()=>{(0,o.nextTick)(()=>{t.value&&(t.value.scrollTop=t.value.scrollHeight)})}),(a,r)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',Ye,[(0,o.createElementVNode)('div',Re,[(0,o.createVNode)(me,{type:'simple'}),r[0]||(r[0]=(0,o.createElementVNode)('span',{class:'log-title'},'æˆ˜æ–—æ—¥å¿—',-1)),(0,o.createVNode)(me,{type:'simple'})]),(0,o.createElementVNode)('div',{ref_key:'logContainer',ref:t,class:'log-content'},[(0,o.createVNode)(o.TransitionGroup,{name:'log-item'},{default:(0,o.withCtx)(()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.logs,e=>((0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e.id,class:(0,o.normalizeClass)(['log-entry',e.type])},[r[1]||(r[1]=(0,o.createElementVNode)('span',{class:'log-prefix'},'>',-1)),(0,o.createElementVNode)('span',Xe,(0,o.toDisplayString)(e.message),1)],2))),128))]),_:1})],512)]))}};var Ge=t(16),Ue={};Ue.styleTagTransform=I(),Ue.setAttributes=B(),Ue.insert=C().bind(null,'head'),Ue.domAPI=V(),Ue.insertStyleElement=T();w()(Ge.A,Ue);Ge.A&&Ge.A.locals&&Ge.A.locals;const qe=(0,L.A)(He,[['__scopeId','data-v-554b1c6d']]),Je={class:'action-menu'},Ke={key:0,class:'action-buttons'},We={key:1,class:'target-selection'},Ze={__name:'ActionMenu',props:{currentUnit:{type:Object,default:null},isSelectingTarget:{type:Boolean,default:!1}},emits:['attack','defend','skill','retreat','cancel'],setup(e){const a=e,t=(0,o.computed)(()=>a.currentUnit?.skills?.length>0);return(a,r)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',Je,[e.isSelectingTarget?((0,o.openBlock)(),(0,o.createElementBlock)('div',We,[r[10]||(r[10]=(0,o.createElementVNode)('div',{class:'selection-prompt'},[(0,o.createElementVNode)('span',{class:'prompt-icon'},'ğŸ¯'),(0,o.createElementVNode)('span',{class:'prompt-text'},'é€‰æ‹©æ”»å‡»ç›®æ ‡')],-1)),(0,o.createVNode)(ye,{variant:'ghost',onClick:r[4]||(r[4]=e=>a.$emit('cancel'))},{default:(0,o.withCtx)(()=>[...r[9]||(r[9]=[(0,o.createTextVNode)(' å–æ¶ˆ ',-1)])]),_:1})])):((0,o.openBlock)(),(0,o.createElementBlock)('div',Ke,[(0,o.createVNode)(ye,{onClick:r[0]||(r[0]=e=>a.$emit('attack'))},{default:(0,o.withCtx)(()=>[...r[5]||(r[5]=[(0,o.createElementVNode)('span',{class:'action-icon'},'âš”ï¸',-1),(0,o.createTextVNode)(' æ”»å‡» ',-1)])]),_:1}),(0,o.createVNode)(ye,{onClick:r[1]||(r[1]=e=>a.$emit('defend'))},{default:(0,o.withCtx)(()=>[...r[6]||(r[6]=[(0,o.createElementVNode)('span',{class:'action-icon'},'ğŸ›¡ï¸',-1),(0,o.createTextVNode)(' é˜²å¾¡ ',-1)])]),_:1}),(0,o.createVNode)(ye,{onClick:r[2]||(r[2]=e=>a.$emit('skill')),disabled:!t.value},{default:(0,o.withCtx)(()=>[...r[7]||(r[7]=[(0,o.createElementVNode)('span',{class:'action-icon'},'âœ¨',-1),(0,o.createTextVNode)(' æŠ€èƒ½ ',-1)])]),_:1},8,['disabled']),(0,o.createVNode)(ye,{variant:'ghost',onClick:r[3]||(r[3]=e=>a.$emit('retreat'))},{default:(0,o.withCtx)(()=>[...r[8]||(r[8]=[(0,o.createElementVNode)('span',{class:'action-icon'},'ğŸƒ',-1),(0,o.createTextVNode)(' æ’¤é€€ ',-1)])]),_:1})]))]))}};var Qe=t(610),ea={};ea.styleTagTransform=I(),ea.setAttributes=B(),ea.insert=C().bind(null,'head'),ea.domAPI=V(),ea.insertStyleElement=T();w()(Qe.A,ea);Qe.A&&Qe.A.locals&&Qe.A.locals;const aa=(0,L.A)(Ze,[['__scopeId','data-v-bc86c076']]),ta=(0,r.defineStore)('battle',()=>{const e=(0,o.ref)(!1),a=(0,o.ref)(0),t=(0,o.ref)('idle'),r=(0,o.ref)([]),n=(0,o.ref)([]),i=(0,o.ref)(0),l=(0,o.ref)([]),c=(0,o.ref)([]),s=(0,o.ref)(null),d=(0,o.computed)(()=>0===l.value.length?null:l.value[i.value]),p=(0,o.computed)(()=>!!d.value&&!d.value.isEnemy),m=(0,o.computed)(()=>{const e=r.value.filter(e=>!e.isDefeated),a=n.value.filter(e=>!e.isDefeated);return 0===e.length||0===a.length}),v=(0,o.computed)(()=>{if(!m.value)return null;return 0===n.value.filter(e=>!e.isDefeated).length}),u=o=>{s.value=o,a.value=1,t.value='player_turn',c.value=[],r.value=(o.allies||[]).map((e,a)=>({...e,id:`ally_${a}`,isEnemy:!1,isDefeated:!1,isDefending:!1})),n.value=(o.enemies||[]).map((e,a)=>({...e,id:`enemy_${a}`,isEnemy:!0,isDefeated:!1,isDefending:!1})),g(),y('system',`æˆ˜æ–—å¼€å§‹ï¼å›åˆ ${a.value}`),e.value=!0},g=()=>{const e=[...r.value.filter(e=>!e.isDefeated),...n.value.filter(e=>!e.isDefeated)];l.value=e.sort((e,a)=>a.unit.spd-e.unit.spd),i.value=0},f=()=>{i.value++,i.value>=l.value.length&&(a.value++,i.value=0,g(),y('system',`å›åˆ ${a.value} å¼€å§‹`)),d.value&&(t.value=d.value.isEnemy?'enemy_turn':'player_turn'),m.value&&(t.value='battle_end')},b=(e,a)=>{const t=e.unit.atk*e.unit.currentCount;let o=a.unit.def;a.isDefending&&(o=Math.floor(1.5*o));const r=Math.max(1,t-2*o),n=.1*r;return Math.floor(r+(Math.random()*n*2-n))},h=(e,a)=>{const t=e.unit.hp||15,o=Math.ceil(a/t),r=Math.min(o,e.unit.currentCount);return e.unit.currentCount-=r,r},y=(e,t)=>{c.value.push({id:Date.now(),type:e,message:t,turn:a.value})};return{isBattleActive:e,currentTurn:a,battlePhase:t,allies:r,enemies:n,turnOrder:l,battleLogs:c,battleConfig:s,currentUnit:d,isPlayerTurn:p,isBattleOver:m,isVictory:v,initBattle:u,startBattle:e=>{u(e)},pauseBattle:()=>{},endBattle:a=>{e.value=!1,t.value='idle'},executeAttack:(e,a)=>{if(!e||!a)return;const t=b(e,a),o=h(a,t);y('combat',`${e.name}ã€${e.unit.type}Ã—${e.unit.currentCount}ã€‘æ”»å‡»${a.name}ã€${a.unit.type}ã€‘ï¼Œé€ æˆ ${t} ä¼¤å®³ï¼Œå‡»æ€ ${o} äºº`),a.unit.currentCount<=0&&(a.isDefeated=!0,y('system',`${a.name} è¢«å‡»è´¥ï¼`)),f()},executeDefend:e=>{e&&(e.isDefending=!0,y('combat',`${e.name} é€‰æ‹©é˜²å¾¡ï¼Œé˜²å¾¡åŠ›æå‡50%`),f())},nextTurn:f,addLog:y,getBattleResult:()=>({victory:v.value,turns:a.value,allySurvivors:r.value.filter(e=>!e.isDefeated).map(e=>({name:e.name,remaining:e.unit.currentCount})),enemiesDefeated:n.value.filter(e=>e.isDefeated).map(e=>e.name),logs:c.value}),resetBattle:()=>{e.value=!1,a.value=0,t.value='idle',r.value=[],n.value=[],l.value=[],c.value=[],s.value=null}}}),oa={class:'battle-panel-overlay'},ra={class:'battle-panel'},na={class:'battle-header'},ia={class:'battle-title'},la={class:'battle-body'},ca={class:'enemy-section'},sa={class:'units-row'},da={class:'battle-log-section'},pa={class:'ally-section'},ma={class:'units-row'},va={class:'battle-footer'},ua={key:1,class:'battle-result'},ga={key:0,class:'result-victory'},fa={key:1,class:'result-defeat'},ba={key:2,class:'enemy-turn-indicator'},ha={__name:'BattlePanel',props:{battleConfig:{type:Object,required:!0}},emits:['close','complete'],setup(e,{emit:a}){const t=e,n=a,i=ta(),{enemies:l,allies:c,currentTurn:s,currentUnit:d,battleLogs:p,isPlayerTurn:m,isBattleOver:v,isVictory:u}=(0,r.storeToRefs)(i),g=(0,o.ref)(!1),f=(0,o.ref)(null),b=()=>{g.value=!0},h=()=>{g.value=!1,f.value=null},y=()=>{i.executeDefend(d.value),v.value||m.value||x()},x=async()=>{for(await new Promise(e=>setTimeout(e,800));!m.value&&!v.value;){const e=d.value;if(!e||e.isDefeated){i.nextTurn();continue}const a=c.value.filter(e=>!e.isDefeated);if(!(a.length>0))break;{const t=a[Math.floor(Math.random()*a.length)];await new Promise(e=>setTimeout(e,500)),i.executeAttack(e,t)}await new Promise(e=>setTimeout(e,300))}},k=()=>{console.log('Skill menu not yet implemented')},w=()=>{confirm('ç¡®å®šè¦æ’¤é€€å—ï¼Ÿ')&&n('complete',{victory:!1,retreated:!0})},N=()=>{n('complete',i.getBattleResult())};return(0,o.onMounted)(()=>{i.initBattle(t.battleConfig)}),(0,o.watch)(v,e=>{e&&i.addLog('system',u.value?'æˆ˜æ–—èƒœåˆ©ï¼':'æˆ˜æ–—å¤±è´¥...')}),(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',oa,[(0,o.createElementVNode)('div',ra,[(0,o.createCommentVNode)(' Battle Header '),(0,o.createElementVNode)('header',na,[(0,o.createVNode)(le,{class:'header-content'},{default:(0,o.withCtx)(()=>[(0,o.createElementVNode)('h2',ia,[a[1]||(a[1]=(0,o.createElementVNode)('span',{class:'title-ornament'},'âš”ï¸',-1)),(0,o.createTextVNode)(' æˆ˜æ–— - å›åˆ '+(0,o.toDisplayString)((0,o.unref)(s))+' ',1),a[2]||(a[2]=(0,o.createElementVNode)('span',{class:'title-ornament'},'âš”ï¸',-1))])]),_:1})]),(0,o.createCommentVNode)(' Battle Body '),(0,o.createElementVNode)('main',la,[(0,o.createCommentVNode)(' Enemy Section '),(0,o.createElementVNode)('section',ca,[a[3]||(a[3]=(0,o.createElementVNode)('div',{class:'section-label'},'æ•Œæ–¹é˜µè¥',-1)),(0,o.createElementVNode)('div',sa,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(l),e=>((0,o.openBlock)(),(0,o.createBlock)(je,{key:e.id,unit:e,'is-enemy':!0,'is-active':(0,o.unref)(d)?.id===e.id,'is-selectable':g.value&&!e.isDefeated,onClick:a=>{return t=e,void(g.value&&!t.isDefeated&&(f.value=t,i.executeAttack(d.value,t),h(),v.value||m.value||x()));var t}},null,8,['unit','is-active','is-selectable','onClick']))),128))])]),(0,o.createCommentVNode)(' Battle Log '),(0,o.createElementVNode)('section',da,[(0,o.createVNode)(qe,{logs:(0,o.unref)(p)},null,8,['logs'])]),(0,o.createCommentVNode)(' Ally Section '),(0,o.createElementVNode)('section',pa,[a[4]||(a[4]=(0,o.createElementVNode)('div',{class:'section-label'},'æˆ‘æ–¹é˜µè¥',-1)),(0,o.createElementVNode)('div',ma,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(c),e=>((0,o.openBlock)(),(0,o.createBlock)(je,{key:e.id,unit:e,'is-enemy':!1,'is-active':(0,o.unref)(d)?.id===e.id,'is-current-turn':(0,o.unref)(m)&&(0,o.unref)(d)?.id===e.id},null,8,['unit','is-active','is-current-turn']))),128))])])]),(0,o.createCommentVNode)(' Battle Footer '),(0,o.createElementVNode)('footer',va,[(0,o.unref)(m)&&!(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createBlock)(aa,{key:0,'current-unit':(0,o.unref)(d),'is-selecting-target':g.value,onAttack:b,onDefend:y,onSkill:k,onRetreat:w,onCancel:h},null,8,['current-unit','is-selecting-target'])):(0,o.unref)(v)?((0,o.openBlock)(),(0,o.createElementBlock)('div',ua,[(0,o.unref)(u)?((0,o.openBlock)(),(0,o.createElementBlock)('div',ga,[...a[5]||(a[5]=[(0,o.createElementVNode)('span',{class:'result-icon'},'ğŸ†',-1),(0,o.createElementVNode)('span',{class:'result-text'},'èƒœåˆ©ï¼',-1)])])):((0,o.openBlock)(),(0,o.createElementBlock)('div',fa,[...a[6]||(a[6]=[(0,o.createElementVNode)('span',{class:'result-icon'},'ğŸ’€',-1),(0,o.createElementVNode)('span',{class:'result-text'},'è´¥åŒ—...',-1)])])),(0,o.createVNode)(ye,{variant:'primary',onClick:N},{default:(0,o.withCtx)(()=>[...a[7]||(a[7]=[(0,o.createTextVNode)(' ç»§ç»­ ',-1)])]),_:1})])):((0,o.openBlock)(),(0,o.createElementBlock)('div',ba,[(0,o.createVNode)(Ne,{size:'small'}),a[8]||(a[8]=(0,o.createElementVNode)('span',null,'æ•Œæ–¹å›åˆ...',-1))]))]),(0,o.createCommentVNode)(' Collapse Button '),(0,o.createElementVNode)('button',{class:'collapse-btn',onClick:a[0]||(a[0]=a=>e.$emit('close'))},[...a[9]||(a[9]=[(0,o.createElementVNode)('span',null,'âœ• æ”¶èµ·æˆ˜æ–—é¢æ¿',-1)])])])]))}};var ya=t(341),xa={};xa.styleTagTransform=I(),xa.setAttributes=B(),xa.insert=C().bind(null,'head'),xa.domAPI=V(),xa.insertStyleElement=T();w()(ya.A,xa);ya.A&&ya.A.locals&&ya.A.locals;const ka=(0,L.A)(ha,[['__scopeId','data-v-8635a8f4']]),wa={class:'main-view'},Na={class:'story-section'},Va={key:0,class:'narration-text'},Ea=['innerHTML'],Ca={class:'dialogue-block'},Aa={class:'speaker-name'},Ba={class:'dialogue-text'},Sa={class:'system-message'},Ta={key:0,class:'loading-indicator'},za={class:'action-section'},_a={key:0,class:'action-options'},Da={class:'custom-input-area'},Ia={class:'input-wrapper'},Ma=['disabled'],Pa={__name:'MainView',setup(e){const a=c(),t=ta(),n=s(),{storyMessages:i,actionOptions:l,currentBattleConfig:d}=(0,r.storeToRefs)(a),{isBattleActive:p}=(0,r.storeToRefs)(t),{isLoading:m}=(0,r.storeToRefs)(n),v=(0,o.ref)(null),u=(0,o.ref)(''),g=(0,o.computed)(()=>null!==d.value&&!p.value),f=async()=>{if(!u.value.trim()||m.value)return;const e=u.value.trim();u.value='',n.setLoading(!0,'æ­£åœ¨ç”Ÿæˆ...'),await new Promise(e=>setTimeout(e,1500)),a.addNarration(`ä½ å†³å®š${e}ã€‚\n\n*è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„å™äº‹å“åº”ã€‚*`),n.setLoading(!1),b()},b=()=>{(0,o.nextTick)(()=>{v.value&&(v.value.scrollTop=v.value.scrollHeight)})},h=()=>{},y=()=>{t.startBattle(d.value)},x=()=>{t.pauseBattle()},k=e=>{t.endBattle(e),e.victory?(a.addNarration('*æˆ˜æ–—èƒœåˆ©ï¼æ•Œäººè¢«å‡»é€€äº†ã€‚*'),n.addNotification({type:'success',message:'æˆ˜æ–—èƒœåˆ©ï¼'})):(a.addNarration('*æˆ˜æ–—å¤±è´¥...ä½ çš„éƒ¨é˜Ÿè¢«è¿«æ’¤é€€ã€‚*'),n.addNotification({type:'error',message:'æˆ˜æ–—å¤±è´¥'})),a.clearBattleConfig(),b()};return(0,o.watch)(i,()=>{b()},{deep:!0}),(0,o.onMounted)(()=>{b(),a.setBattleConfig({enemies:[{name:'å“¥å¸ƒæ—å¤´ç›®',portrait:null,unit:{type:'å“¥å¸ƒæ—',currentCount:20,maxCount:20,atk:8,def:4,spd:6,hp:10}},{name:'ç‹¼éª‘å£«',portrait:null,unit:{type:'åº§ç‹¼',currentCount:8,maxCount:8,atk:12,def:6,spd:14,hp:18}}],allies:[{name:'{{user}}',portrait:null,unit:{type:'å‰‘å£«',currentCount:20,maxCount:30,atk:10,def:8,spd:5,hp:15}},{name:'å¼“æ‰‹é•¿',portrait:null,unit:{type:'å¼“ç®­æ‰‹',currentCount:25,maxCount:25,atk:14,def:3,spd:7,hp:12}}],victoryCondition:'å‡»è´¥æ‰€æœ‰æ•Œäºº'})}),(e,t)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',wa,[(0,o.createCommentVNode)(' Story Display Section '),(0,o.createElementVNode)('section',Na,[(0,o.createVNode)(ae,{class:'story-panel','with-border':!0},{default:(0,o.withCtx)(()=>[(0,o.createVNode)(me,{type:'top'}),(0,o.createCommentVNode)(' Story Content '),(0,o.createElementVNode)('div',{ref_key:'storyContainer',ref:v,class:'story-content',onScroll:h},[(0,o.createCommentVNode)(' Messages '),((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(i),(e,a)=>{return(0,o.openBlock)(),(0,o.createElementBlock)('div',{key:a,class:(0,o.normalizeClass)(['story-message',e.type])},[(0,o.createCommentVNode)(' Narration '),'narration'===e.type?((0,o.openBlock)(),(0,o.createElementBlock)('div',Va,[(0,o.createElementVNode)('span',{innerHTML:(r=e.content,r?r.replace(/\n/g,'<br>').replace(/\*\*(.+?)\*\*/g,'<strong>$1</strong>').replace(/\*(.+?)\*/g,'<em>$1</em>'):'')},null,8,Ea)])):'dialogue'===e.type?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:1},[(0,o.createCommentVNode)(' Dialogue '),(0,o.createElementVNode)('div',Ca,[(0,o.createElementVNode)('span',Aa,(0,o.toDisplayString)(e.speaker),1),(0,o.createElementVNode)('span',Ba,'"'+(0,o.toDisplayString)(e.content)+'"',1)])],2112)):'system'===e.type?((0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,{key:2},[(0,o.createCommentVNode)(' System Message '),(0,o.createElementVNode)('div',Sa,[t[1]||(t[1]=(0,o.createElementVNode)('span',{class:'system-icon'},'â„¹ï¸',-1)),(0,o.createElementVNode)('span',null,(0,o.toDisplayString)(e.content),1)])],2112)):(0,o.createCommentVNode)('v-if',!0)],2);var r}),128)),(0,o.createCommentVNode)(' Loading Indicator '),(0,o.unref)(m)?((0,o.openBlock)(),(0,o.createElementBlock)('div',Ta,[(0,o.createVNode)(Ne,{size:'medium'}),t[2]||(t[2]=(0,o.createElementVNode)('span',null,'æ­£åœ¨æ€è€ƒ...',-1))])):(0,o.createCommentVNode)('v-if',!0)],544),(0,o.createVNode)(me,{type:'bottom'})]),_:1})]),(0,o.createCommentVNode)(' Action Section '),(0,o.createElementVNode)('section',za,[(0,o.createVNode)(le,{class:'action-panel'},{default:(0,o.withCtx)(()=>[(0,o.createCommentVNode)(' Action Options '),(0,o.unref)(l).length>0?((0,o.openBlock)(),(0,o.createElementBlock)('div',_a,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(l),(e,r)=>((0,o.openBlock)(),(0,o.createBlock)(ye,{key:r,disabled:(0,o.unref)(m),onClick:t=>(async e=>{n.setLoading(!0,'æ­£åœ¨ç”Ÿæˆ...'),await new Promise(e=>setTimeout(e,1500)),a.addNarration(`ä½ é€‰æ‹©äº†"${e.label}"ã€‚\n\n*è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçš„å™äº‹å“åº”ã€‚åœ¨å®é™…æ¸¸æˆä¸­ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºLLMç”Ÿæˆçš„å†…å®¹ã€‚*`),n.setLoading(!1),b()})(e)},{default:(0,o.withCtx)(()=>[t[3]||(t[3]=(0,o.createElementVNode)('span',{class:'option-icon'},'â—ˆ',-1)),(0,o.createTextVNode)(' '+(0,o.toDisplayString)(e.label),1)]),_:2},1032,['disabled','onClick']))),128))])):(0,o.createCommentVNode)('v-if',!0),(0,o.createCommentVNode)(' Battle Trigger Button '),(0,o.createVNode)(o.Transition,{name:'battle-btn'},{default:(0,o.withCtx)(()=>[g.value?((0,o.openBlock)(),(0,o.createBlock)(ye,{key:0,variant:'battle',class:'battle-trigger-btn',onClick:y},{default:(0,o.withCtx)(()=>[...t[4]||(t[4]=[(0,o.createElementVNode)('span',null,'âš”ï¸',-1),(0,o.createTextVNode)(' å¼€å§‹æˆ˜æ–— ',-1),(0,o.createElementVNode)('span',null,'âš”ï¸',-1)])]),_:1})):(0,o.createCommentVNode)('v-if',!0)]),_:1}),(0,o.createCommentVNode)(' Custom Input '),(0,o.createElementVNode)('div',Da,[(0,o.createElementVNode)('div',Ia,[(0,o.withDirectives)((0,o.createElementVNode)('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>u.value=e),type:'text',placeholder:'è¾“å…¥è‡ªå®šä¹‰è¡ŒåŠ¨...',disabled:(0,o.unref)(m),onKeyup:(0,o.withKeys)(f,['enter'])},null,40,Ma),[[o.vModelText,u.value]]),(0,o.createVNode)(ye,{variant:'small',disabled:!u.value.trim()||(0,o.unref)(m),onClick:f},{default:(0,o.withCtx)(()=>[...t[5]||(t[5]=[(0,o.createTextVNode)(' å‘é€ ',-1)])]),_:1},8,['disabled'])])])]),_:1})]),(0,o.createCommentVNode)(' Battle Panel Overlay '),(0,o.createVNode)(o.Transition,{name:'battle-panel'},{default:(0,o.withCtx)(()=>[(0,o.unref)(p)?((0,o.openBlock)(),(0,o.createBlock)(ka,{key:0,'battle-config':(0,o.unref)(d),onClose:x,onComplete:k},null,8,['battle-config'])):(0,o.createCommentVNode)('v-if',!0)]),_:1})]))}};var La=t(264),Oa={};Oa.styleTagTransform=I(),Oa.setAttributes=B(),Oa.insert=C().bind(null,'head'),Oa.domAPI=V(),Oa.insertStyleElement=T();w()(La.A,Oa);La.A&&La.A.locals&&La.A.locals;const Fa=(0,L.A)(Pa,[['__scopeId','data-v-cd976064']]),$a={class:'placeholder-view training-view'},ja={__name:'TrainingView',setup:e=>(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',$a,[(0,o.createVNode)(ae,{class:'placeholder-panel','with-border':!0},{default:(0,o.withCtx)(()=>[...a[0]||(a[0]=[(0,o.createElementVNode)('div',{class:'placeholder-content'},[(0,o.createElementVNode)('span',{class:'placeholder-icon'},'ğŸ’«'),(0,o.createElementVNode)('h2',null,'è°ƒæ•™'),(0,o.createElementVNode)('p',null,'è§’è‰²åŸ¹å…»ã€æŠ€èƒ½å­¦ä¹ ã€å±æ€§å¼ºåŒ–'),(0,o.createElementVNode)('p',{class:'coming-soon'},'å¼€å‘ä¸­...')],-1)])]),_:1})]))};var Ya=t(565),Ra={};Ra.styleTagTransform=I(),Ra.setAttributes=B(),Ra.insert=C().bind(null,'head'),Ra.domAPI=V(),Ra.insertStyleElement=T();w()(Ya.A,Ra);Ya.A&&Ya.A.locals&&Ya.A.locals;const Xa=(0,L.A)(ja,[['__scopeId','data-v-0da528fe']]),Ha={class:'placeholder-view conquest-view'},Ga={__name:'ConquestView',setup:e=>(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',Ha,[(0,o.createVNode)(ae,{class:'placeholder-panel','with-border':!0},{default:(0,o.withCtx)(()=>[...a[0]||(a[0]=[(0,o.createElementVNode)('div',{class:'placeholder-content'},[(0,o.createElementVNode)('span',{class:'placeholder-icon'},'âš”ï¸'),(0,o.createElementVNode)('h2',null,'å¾æœ'),(0,o.createElementVNode)('p',null,'æˆ˜å½¹åœ°å›¾ã€æ®ç‚¹æ”»ç•¥ã€åŠ¿åŠ›æˆ˜'),(0,o.createElementVNode)('p',{class:'coming-soon'},'å¼€å‘ä¸­...')],-1)])]),_:1})]))};var Ua=t(35),qa={};qa.styleTagTransform=I(),qa.setAttributes=B(),qa.insert=C().bind(null,'head'),qa.domAPI=V(),qa.insertStyleElement=T();w()(Ua.A,qa);Ua.A&&Ua.A.locals&&Ua.A.locals;const Ja=(0,L.A)(Ga,[['__scopeId','data-v-72830162']]),Ka={class:'placeholder-view formation-view'},Wa={__name:'FormationView',setup:e=>(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',Ka,[(0,o.createVNode)(ae,{class:'placeholder-panel','with-border':!0},{default:(0,o.withCtx)(()=>[...a[0]||(a[0]=[(0,o.createElementVNode)('div',{class:'placeholder-content'},[(0,o.createElementVNode)('span',{class:'placeholder-icon'},'ğŸ°'),(0,o.createElementVNode)('h2',null,'ç¼–åˆ¶'),(0,o.createElementVNode)('p',null,'å†›é˜Ÿç®¡ç†ã€å°†é¢†é…ç½®ã€éƒ¨é˜Ÿç¼–æˆ'),(0,o.createElementVNode)('p',{class:'coming-soon'},'å¼€å‘ä¸­...')],-1)])]),_:1})]))};var Za=t(114),Qa={};Qa.styleTagTransform=I(),Qa.setAttributes=B(),Qa.insert=C().bind(null,'head'),Qa.domAPI=V(),Qa.insertStyleElement=T();w()(Za.A,Qa);Za.A&&Za.A.locals&&Za.A.locals;const et=(0,L.A)(Wa,[['__scopeId','data-v-49b3376c']]),at={class:'placeholder-view development-view'},tt={__name:'DevelopmentView',setup:e=>(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',at,[(0,o.createVNode)(ae,{class:'placeholder-panel','with-border':!0},{default:(0,o.withCtx)(()=>[...a[0]||(a[0]=[(0,o.createElementVNode)('div',{class:'placeholder-content'},[(0,o.createElementVNode)('span',{class:'placeholder-icon'},'ğŸ“ˆ'),(0,o.createElementVNode)('h2',null,'å‘å±•'),(0,o.createElementVNode)('p',null,'èµ„æºç®¡ç†ã€å»ºç­‘å‡çº§ã€ç§‘æŠ€æ ‘'),(0,o.createElementVNode)('p',{class:'coming-soon'},'å¼€å‘ä¸­...')],-1)])]),_:1})]))};var ot=t(536),rt={};rt.styleTagTransform=I(),rt.setAttributes=B(),rt.insert=C().bind(null,'head'),rt.domAPI=V(),rt.insertStyleElement=T();w()(ot.A,rt);ot.A&&ot.A.locals&&ot.A.locals;const nt=(0,L.A)(tt,[['__scopeId','data-v-d5fe789c']]),it={id:'telain-app',class:'telain-container'},lt={class:'app-content'},ct={class:'main-content'},st={key:0,class:'global-overlay'},dt={class:'notifications-container'},pt={class:'notification-icon'},mt={class:'notification-text'},vt={__name:'App',setup(e){const a=c(),t=s(),{hasActiveOverlay:n,notifications:i}=(0,r.storeToRefs)(t),l=(0,o.ref)('main'),d={main:Fa,training:Xa,conquest:Ja,formation:et,development:nt},p=(0,o.computed)(()=>d[l.value]);return(0,o.provide)('gameStore',a),(0,o.provide)('uiStore',t),(0,o.onMounted)(()=>{a.loadFromST()}),(e,a)=>((0,o.openBlock)(),(0,o.createElementBlock)('div',it,[(0,o.createCommentVNode)(' Background Layer '),a[1]||(a[1]=(0,o.createElementVNode)('div',{class:'app-background'},[(0,o.createElementVNode)('div',{class:'bg-overlay'}),(0,o.createElementVNode)('div',{class:'bg-particles'})],-1)),(0,o.createCommentVNode)(' Main Content Area '),(0,o.createElementVNode)('div',lt,[(0,o.createCommentVNode)(' Top Info Bar '),(0,o.createVNode)(O),(0,o.createCommentVNode)(' Page Content '),(0,o.createElementVNode)('main',ct,[(0,o.createVNode)(o.Transition,{name:'page',mode:'out-in'},{default:(0,o.withCtx)(()=>[((0,o.openBlock)(),(0,o.createBlock)((0,o.resolveDynamicComponent)(p.value),{key:l.value}))]),_:1})]),(0,o.createCommentVNode)(' Bottom Navigation Bar '),(0,o.createVNode)(J,{modelValue:l.value,'onUpdate:modelValue':a[0]||(a[0]=e=>l.value=e)},null,8,['modelValue'])]),(0,o.createCommentVNode)(' Global Overlay Slot '),((0,o.openBlock)(),(0,o.createBlock)(o.Teleport,{to:'body'},[(0,o.createVNode)(o.Transition,{name:'overlay'},{default:(0,o.withCtx)(()=>[(0,o.unref)(n)?((0,o.openBlock)(),(0,o.createElementBlock)('div',st,[(0,o.createCommentVNode)(' Overlays will be rendered here ')])):(0,o.createCommentVNode)('v-if',!0)]),_:1})])),(0,o.createCommentVNode)(' Notifications '),(0,o.createElementVNode)('div',dt,[(0,o.createVNode)(o.TransitionGroup,{name:'notification'},{default:(0,o.withCtx)(()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(i),e=>{return(0,o.openBlock)(),(0,o.createElementBlock)('div',{key:e.id,class:(0,o.normalizeClass)(['notification',e.type])},[(0,o.createElementVNode)('span',pt,(0,o.toDisplayString)((a=e.type,{info:'i',success:'âœ“',warning:'!',error:'âœ•'}[a]||'i')),1),(0,o.createElementVNode)('span',mt,(0,o.toDisplayString)(e.message),1)],2);var a}),128))]),_:1})])]))}};var ut=t(485),gt={};gt.styleTagTransform=I(),gt.setAttributes=B(),gt.insert=C().bind(null,'head'),gt.domAPI=V(),gt.insertStyleElement=T();w()(ut.A,gt);ut.A&&ut.A.locals&&ut.A.locals;const ft=vt;var bt=t(249),ht={};ht.styleTagTransform=I(),ht.setAttributes=B(),ht.insert=C().bind(null,'head'),ht.domAPI=V(),ht.insertStyleElement=T();w()(bt.A,ht);bt.A&&bt.A.locals&&bt.A.locals;var yt=t(407),xt={};xt.styleTagTransform=I(),xt.setAttributes=B(),xt.insert=C().bind(null,'head'),xt.domAPI=V(),xt.insertStyleElement=T();w()(yt.A,xt);yt.A&&yt.A.locals&&yt.A.locals;$(()=>{console.log('[Telain RPG] Initializing in Tavern Helper...');const e=(0,o.createApp)(ft),a=(0,r.createPinia)();e.use(a),e.mount('#app'),console.log('[Telain RPG] App mounted successfully')});</script>